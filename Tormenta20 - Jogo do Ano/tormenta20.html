<div class="main">
    <div class="left-container">
        <div class="header-info">
            <div class="input-with-text-bellow char-name">
                <input name="attr_character_name" type="text"  spellcheck="false"  value="">
                <span data-i18n="nome">Nome do Personagem</span>
            </div>
            <div class="input-with-text-bellow char-player">
                <input name="attr_playername" type="text" spellcheck="false" value=""/>
                <span data-i18n="jogador">Jogador</span>
            </div>
            <div class="input-with-text-bellow">
                <input name="attr_trace" type="text" spellcheck="false" value=""/>
                <span data-i18n="raca">Raça</span>
            </div>
            <div class="input-with-text-bellow">
                <input name="attr_torigin" type="text" spellcheck="false" value=""/>
                <span data-i18n="origem">Origem</span>
            </div>
            <div class="input-with-text-bellow">
                <input name="attr_tlevel" type="text" spellcheck="false" value=""/>
                <span data-i18n="classe_nivel">Classe & Nível</span>
            </div>
        </div>

        <div class="character-attributes">
            <!-- Força -->
            <div class="outer-container-negative-corner">
                <div class="container-negative-corner">
                    <div class="inside-negative-corner">
                        <!-- Conteudo aqui -->
                        <button tabindex="-1" type="roll" name="roll_for" value="&{template:t20}{{character=@{character_name}}}{{rollname=Força}}{{theroll=[[1d20+@{for_mod}]]}}" class="button-title-attribute" data-i18n="mod_forca">FOR</button>
                        <input name="attr_for" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{for_mod}" />
                          
                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                </div>
            </div>
            <!-- Destreza -->
            <div class="outer-container-negative-corner">
                <div class="container-negative-corner">
                    <div class="inside-negative-corner">
                        <button tabindex="-1" type="roll" name="roll_des" value="&{template:t20}{{character=@{character_name}}}{{rollname=Destreza}}{{theroll=[[1d20+@{des_mod}]]}}" class="button-title-attribute" data-i18n="mod_destreza">DES</button>
                        <input name="attr_des" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{des_mod}" />
                            
                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                </div>
            </div>
            <!-- Constituição -->
            <div class="outer-container-negative-corner">
                <div class="container-negative-corner">
                    <div class="inside-negative-corner">
                        <button tabindex="-1" type="roll" name="roll_con" value="&{template:t20}{{character=@{character_name}}}{{rollname=Constituição}}{{theroll=[[1d20+@{con_mod}]]}}" class="button-title-attribute" data-i18n="mod_constituicao">CON</button>
                        <input name="attr_con" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{con_mod}" />
                            
                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                </div>
            </div>
            <!-- Inteligência -->
            <div class="outer-container-negative-corner">
                <div class="container-negative-corner">
                    <div class="inside-negative-corner">
                        <button tabindex="-1" type="roll" name="roll_int" value="&{template:t20}{{character=@{character_name}}}{{rollname=Inteligência}}{{theroll=[[1d20+@{int_mod}]]}}" class="button-title-attribute" data-i18n="mod_inteligencia">INT</button>
                        <input name="attr_int" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{int_mod}" />
                            
                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                </div>
            </div>
            <!-- Sabedoria -->
            <div class="outer-container-negative-corner">
                <div class="container-negative-corner">
                    <div class="inside-negative-corner">
                        <button tabindex="-1" type="roll" name="roll_sab" value="&{template:t20}{{character=@{character_name}}}{{rollname=Sabedoria}}{{theroll=[[1d20+@{sab_mod}]]}}" class="button-title-attribute" data-i18n="mod_sabedoria">SAB</button>
                        <input name="attr_sab" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{sab_mod}" />
                            
                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                </div>
            </div>
            <!-- Carisma -->
            <div class="outer-container-negative-corner">
                <div class="container-negative-corner">
                    <div class="inside-negative-corner">
                        <button tabindex="-1" type="roll" name="roll_car" value="&{template:t20}{{character=@{character_name}}}{{rollname=Carisma}}{{theroll=[[1d20+@{car_mod}]]}}" class="button-title-attribute" data-i18n="mod_carisma">CAR</button>
                        <input name="attr_car" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{car_mod}" />
                            
                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                </div>
            </div>
        </div> 

        <div class="pseudo-attributes">
            <!-- Pontos de Vida -->
            <div class="container-negative-corner container-pvs-mps">
                <div class="inside-negative-corner">
                    <div class="box-title" data-i18n="pontos_de_vida">
                        Pontos de Vida
                    </div>
                    <div class="content-centered border-right">
                        <input name="attr_vidatotal" type="text" spellcheck="false" maxlength="4" class="" value="0">
                    </div>
                    <div class="content-centered">
                        <input name="attr_vida" type="text" spellcheck="false" maxlength="4" class="" value="0">
                    </div>
                    <div class="content-centered border-left">
                        <input name="attr_vidatemp" type="text" spellcheck="false" maxlength="4" class="" value="0">
                    </div>
                    <div class="content-centered smaller-text" data-i18n="pv_maximos">Máximos</div>
                    <div class="content-centered smaller-text" data-i18n="pv_atuais">Atuais</div>
                    <div class="content-centered smaller-text" data-i18n="Pv_temporarios">Temporários</div>
                    <div class="corner top-left"></div>
                    <div class="corner top-right"></div>
                    <div class="corner bottom-left"></div>
                    <div class="corner bottom-right"></div>
                </div>
            </div>
            <!-- Pontos de Mana -->
            <div class="container-negative-corner container-pvs-mps">
                <div class="inside-negative-corner">
                    <div class="box-title" data-i18n="pontos_de_mana">
                        Pontos de Mana
                    </div>
                    <div class="content-centered border-right">
                        <input name="attr_manatotal" type="text" spellcheck="false" maxlength="4" class="" value="0">
                    </div>
                    <div class="content-centered">
                        <input name="attr_mana" type="text" spellcheck="false" maxlength="4" class="" value="0">
                    </div>
                    <div class="content-centered border-left">
                        <input name="attr_manatemp" type="text" spellcheck="false" maxlength="4" class="" value="0">
                    </div>
                    <div class="content-centered smaller-text" data-i18n="pm_maximos">Máximos</div>
                    <div class="content-centered smaller-text" data-i18n="pm_atuais">Atuais</div>
                    <div class="content-centered smaller-text" data-i18n="pm_temporarios">Temporários</div>
                    <div class="corner top-left"></div>
                    <div class="corner top-right"></div>
                    <div class="corner bottom-left"></div>
                    <div class="corner bottom-right"></div>
                </div>
            </div>
        </div>

        <div class="attacks-container">
            <div class="inside">
                <div class="container-negative-corner">
                    <div class="inside-negative-corner">
                        <!-- <div class="default-title">Ataques</div> -->
                        <div class="attacksgrid">
                            <div></div>
                            <div class="grid-title" data-i18n="nome_do_ataque">Nome do Ataque</div>
                            <div class="small-title" data-i18n="bonus_ataque">Bônus de Ataque</div>
                            <div class="small-title" data-i18n="dano">Dano</div>
                            <div class="small-title" data-i18n="dano_extra">Dano Extra</div>
                            <div class="small-title" data-i18n="critico">Crítico</div>
                        </div>
                            <!-- Ataques -->
                            <fieldset class="repeating_attacks"> 
                                <div class="attacksgrid">
                                    <button type="roll" name="roll_attack" class="buttonrollataque dado-simples" value="&{template:t20-attack}{{character=@{character_name}}}{{attackname=@{nomeataque}}}{{attackroll=[[1d20cs>@{margemcriticoataque}+[[@{ataquepericia}]]+@{bonusataque}]]}} {{damageroll=[[@{danoataque}+@{modatributodano}+@{danoextraataque}]]}} {{criticaldamageroll=[[@{danocriticoataque}+@{modatributodano}+@{danoextraataque}]]}}{{typeofdamage=@{ataquetipodedano}}}{{description=@{ataquedescricao}}}">T</button> 
                                    <input name="attr_nomeataque" type="text" spellcheck="false" class="" value="">
                                    <input name="attr_bonusataque" type="text" spellcheck="false" class="" value="0">
                                    <input name="attr_danoataque" type="text" spellcheck="false" class="" value="0">
                                    <input name="attr_danoextraataque" type="text" spellcheck="false" class="" value="0">
                                    <div class="containercritico">
                                        <input name="attr_margemcriticoataque" type="text" spellcheck="false" class="margem" value="20">
                                        <span class="divisor"><b>/</b>x</span>
                                        <input name="attr_multiplicadorcriticoataque" type="text" spellcheck="false" class="multiplicador" value="2">
                                    </div>
                                    <input type="hidden" name="attr_danocriticoataque" value="0" readonly="1">

                                    <div class="moreinfo">
                                        <input type="checkbox" class="hiddencheckbox">
                                        <span class="hiddencheckboxcover"></span>
                                        <div class="containermoreinfo">
                                            <!-- <div class="containerdescrataque">
                                                <div class="title">Descrição</div>
                                                <textarea name="attr_proficiencias"></textarea>
                                            </div> -->
                                            <div class="inputtextbellow descricao">
                                                <input name="attr_ataquedescricao" type="text" spellcheck="false" value=""/>
                                                <span class="title" data-i18n="descricao_macros">Descrição / Macros</span>
                                            </div>
                                            <div class="inputtextbellow">
                                                <select name="attr_ataquepericia">
                                                    <option value="@{atuacaototal}">Atuação</option>
                                                    <option value="@{lutatotal}" selected="">Luta</option>
                                                    <option value="@{pontariatotal}">Pontaria</option>
                                                </select>
                                                <span class="title" data-i18n="pericia_utilizada">Perícia utilizada</span>
                                            </div>
                                            <div class="inputtextbellow">
                                                <input name="attr_ataquetipodedano" type="text" spellcheck="false" value=""/>
                                                <span class="title" data-i18n="tipo_de_dano">Tipo de Dano</span>
                                            </div>
                                            <div class="inputtextbellow">
                                                <input name="attr_ataquealcance" type="text" spellcheck="false" value=""/>
                                                <span class="title" data-i18n="alcance">Alcance</span>
                                            </div>
                                            
                                            <div class="inputtextbellow">
                                                <select name="attr_modatributodano">
                                                    <option value="0" selected="">Nenhum</option>
                                                    <option value="@{for_mod}" data-i18n="forca">Força</option>
                                                    <option value="@{des_mod}" data-i18n="destreza">Destreza</option>
                                                    <option value="@{con_mod}" data-i18n="constituicao">Constituição</option>
                                                    <option value="@{int_mod}" data-i18n="inteligencia">Inteligência</option>
                                                    <option value="@{sab_mod}" data-i18n="sabedoria">Sabedoria</option>
                                                    <option value="@{car_mod}" data-i18n="carisma">Carisma</option>
                                                </select>
                                                <span class="title" data-i18n="atributo_no_dano">Atributo no Dano</span>
                                            </div>
                                            <div class="inputtextbellow ataque_rolagens">
                                                <button type="roll" name="roll_failure" class="buttonrollataque buttonrollerro dado" value="&{template:t20-error-chance}{{character=@{character_name}}}{{errorroll=[[1d100]]}}" style="margin: auto !important;">KK</button>                                               
                                                <span class="title" data-i18n="chanceDeErro">Chance de Erro</span>
                                            </div>
                                            <div class="inputtextbellow ataque_rolagens">
                                                <button type="roll" name="roll_attack_best" class="buttonrollataque dado" value="&{template:t20-attack}{{character=@{character_name}}}{{attackname=@{nomeataque}}}{{attackroll=[[2d20kh1cs>@{margemcriticoataque}+[[@{ataquepericia}]]+@{bonusataque}]]}} {{damageroll=[[@{danoataque}+@{modatributodano}+@{danoextraataque}]]}} {{criticaldamageroll=[[@{danocriticoataque}+@{modatributodano}+@{danoextraataque}]]}}{{typeofdamage=@{ataquetipodedano}}}{{description=@{ataquedescricao}}}" style="margin: auto !important;">TT</button>                                               
                                                <span class="title" data-i18n="melhorDado">Melhor Dado</span>
                                            </div>
                                            <div class="inputtextbellow ataque_rolagens">
                                                <button type="roll" name="roll_attack_worst" class="buttonrollataque dado" value="&{template:t20-attack}{{character=@{character_name}}}{{attackname=@{nomeataque}}}{{attackroll=[[2d20kl1cs>@{margemcriticoataque}+[[@{ataquepericia}]]+@{bonusataque}]]}} {{damageroll=[[@{danoataque}+@{modatributodano}+@{danoextraataque}]]}} {{criticaldamageroll=[[@{danocriticoataque}+@{modatributodano}+@{danoextraataque}]]}}{{typeofdamage=@{ataquetipodedano}}}{{description=@{ataquedescricao}}}" style="margin: auto !important;">tt</button>
                                                <span class="title" data-i18n="piorDado">Pior Dado</span>
                                            </div>    

                                            
                                        </div>
                                        <!-- <div class="bottomline"></div> -->
                                    </div>
                                </div> 
                                
                                
                            </fieldset>

                            <!-- Ataques -->


                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                </div>
            </div>
            
        </div>
        <div class="defense-and-proeficience-container">
            <div class="container-defense-armor-shield">
                <div class="container-negative-corner container-defense">
                    <div class="inside-negative-corner">
                        <div class="grid-title" data-i18n="defesa">Defesa</div>
                        <div></div>
                        <div></div>
                        <div></div>
                        <div class="small-title">
                            <select class="select_mod_defesa" name="attr_modatributodefesa">
                                <option value="for_mod" data-i18n="mod_forca">For</option>
                                <option value="des_mod" selected data-i18n="mod_destreza">Des</option>
                                <option value="con_mod" data-i18n="mod_constituicao">Con</option>
                                <option value="int_mod" data-i18n="mod_inteligencia">Int</option>
                                <option value="sab_mod" data-i18n="mod_sabedoria">Sab</option>
                                <option value="car_mod" data-i18n="mod_carisma">Car</option>
                            </select>
                        </div>
                        <div></div>
                        <div class="small-title" data-i18n="bonus_armadura">Bônus de Armadura</div>
                        <div></div>
                        <div class="small-title" data-i18n="bonus_escudo">Bônus de Escudo</div>
                        <div></div>
                        <div class="small-title" data-i18n="bonus_defesa_outros">Outros</div>
                        
                        <div>
                            <input name="attr_defesafake" disabled="true" value="@{defesatotal}" maxlength="3" type="text" spellcheck="false" title="@{defesatotal}">
                        </div>
                        <div class="signal">=</div>
                        <div class="big-signal">10</div>
                        <div class="signal">+</div>
                        <select name="attr_defesaatributo">
                            <option value="0" data-i18n="def_des_no">Não</option>
                            <option value="1" selected data-i18n="def_des_yes">Sim</option>
                        </select>
                        <div class="signal">+</div>
                        <div>
                            <input name="attr_defesaarmadura" type="text" spellcheck="false" value="@{armaduradefesa1}" disabled="true">
                        </div>
                        <div class="signal">+</div>
                        <div>
                            <input name="attr_defesaescudo" type="text" spellcheck="false" value="@{armaduradefesa2}" disabled="true">
                        </div>
                        <div class="signal">+</div>
                        <div>
                            <input name="attr_defesaoutros" type="text" spellcheck="false" value="0">
                        </div>



                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                </div>
                <div class="container-negative-corner container-armor-shield">
                    <div class="inside-negative-corner">
                        <div class="grid-title" data-i18n="armadura_escudo">Armadura & Escudo</div>
                        <div class="small-title"data-i18n="defesa">Defesa</div>
                        <div class="small-title" data-i18n="penalidade">Penalidade</div>
                        <div>
                            <input name="attr_armadura1" type="text" spellcheck="false" value="Armadura">
                        </div>
                        <div>
                            <input name="attr_armaduradefesa1" type="text" spellcheck="false" value="0">
                        </div>
                        <div>
                            <input name="attr_armadurapenalidade1" type="text" spellcheck="false" value="0">
                        </div>
                        <div>
                            <input name="attr_armadura2" type="text" spellcheck="false" value="Escudo">
                        </div>
                        <div>
                            <input name="attr_armaduradefesa2" type="text" spellcheck="false" value="0">
                        </div>
                        <div>
                            <input name="attr_armadurapenalidade2" type="text" spellcheck="false" value="0">
                        </div>
                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                </div>
            </div>
            <div class="box-proficiencies">
                <div class="container-negative-corner">
                    <div class="inside-negative-corner">
                        <div class="default-title" data-i18n="proeficiencia_outras_caracteristicas">
                            Proficiências e outras características
                        </div>
                        <div class="content-centered">
                            <textarea name="attr_proficiencias"></textarea>
                        </div>
                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="powers-and-abilities">
            <div class="container-negative-corner">
                <div class="inside-negative-corner">
                    <div class="default-title" data-i18n="habilidades_poderes_gerais">
                        Habilidades e Poderes Gerais
                    </div>
                    <div class="content-grid">
                        <div class="container-reapeater">
                            <fieldset class="repeating_abilities">
                                <div class="container-ability-power">
                                    <button type="roll" name="roll_ability" class="buttonshowinfo" value="&{template:t20-info}{{infoname=@{nameability}}}{{description=@{abilitydescription}}}">q</button>
                                    <input name="attr_nameability" type="text" spellcheck="false" value=""/>
                                    <input type="checkbox" class="hiddencheckbox">
                                    <span class="hiddencheckboxcover">W</span>
                                    <div class="extra">
                                        <textarea name="attr_abilitydescription"></textarea>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
    
                        <div class="container-reapeater">
                            <fieldset class="repeating_powers">
                                <div class="container-ability-power">
                                    <button type="roll" name="roll_power" class="buttonshowinfo" value="&{template:t20-info}{{infoname=@{namepower}}}{{description=@{powerdescription}}}">q</button>
                                    <input name="attr_namepower" type="text" spellcheck="false" value=""/>
                                    <input type="checkbox" class="hiddencheckbox">
                                    <span class="hiddencheckboxcover">W</span>
                                    <div class="extra">
                                        <textarea name="attr_powerdescription"></textarea>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                    <div class="corner top-left"></div>
                    <div class="corner top-right"></div>
                    <div class="corner bottom-left"></div>
                    <div class="corner bottom-right"></div>
                </div>
            </div>
        </div>
        <div class="spells">
            <div class="container-negative-corner">
                <div class="inside-negative-corner">
                    <div class="default-title" data-i18n="magias">
                        Magias
                    </div>
                    <div class="content-grid">
                        <div class="spellcolumn">
                            <div class="cicloheader">
                                <div class="ciclo-title" data-i18n="primeiro_circulo">1º Círculo</div>
                                <div class="ciclo-cost" data-i18n="primeiro_custo">1 PM</div>
                            </div>
                            <div class="sheet-containerspelllist">
                                <fieldset class="repeating_spells1">
                                    
                                    <div class="container-single-spell">
                                        <button type="roll" name="roll_spell1" class="buttonspell" value="&{template:spell}{{character=@{character_name}}}{{spellname=@{namespell}}}{{type=@{spelltipo}}}{{execution=@{spellexecucao}}}{{duration=@{spellduracao}}}{{range=@{spellalcance}}}{{targetarea=@{spellalvoarea}}}{{resistance=@{spellresistencia}}}{{description=@{spelldescription}}}{{cd=@{spellcd}}}">T</button>
                                        <input name="attr_namespell" type="text" spellcheck="false" value=""/>
                                        <input type="checkbox" class="hiddencheckbox">
                                        <span class="hiddencheckboxcover">W</span>
                                        <div class="extra">
                                            <span data-i18n="tipo_magia">Tipo</span>
                                            <input name="attr_spelltipo" type="text" spellcheck="false" value=""/>
                                            <span class="cd" data-i18n="cd_magia">CD</span>
                                            <input class="cd" name="attr_spellcd" type="text" spellcheck="false" value=""/>

                                            <span data-i18n="execucao_magia">Execução</span>
                                            <input  class="singleline" name="attr_spellexecucao" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="alcance_magia">Alcance</span>
                                            <input class="singleline" name="attr_spellalcance" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="duracao_magia">Duração</span>
                                            <input class="singleline" name="attr_spellduracao" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="alvo_area_magia">Alvo/Área</span>
                                            <input class="singleline" name="attr_spellalvoarea" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="resistencia_magia">Resistência</span>
                                            <input class="singleline"  name="attr_spellresistencia" type="text" spellcheck="false" value=""/>

                                            <span class="fullline" data-i18n="descricao_magia">Descrição</span>
                                            <textarea class="fullline" name="attr_spelldescription"></textarea>
                                        </div>
                                    </div>



                                </fieldset>
                            </div>
                            

                            <div class="cicloheader">
                                <div class="ciclo-title" data-i18n="terceiro_circulo">3º Círculo</div>
                                <div class="ciclo-cost" data-i18n="terceiro_custo">6 PM</div>
                            </div>
                            <div class="sheet-containerspelllist">
                                <fieldset class="repeating_spells3">
                                    <div class="container-single-spell">
                                        <button type="roll" name="roll_spell3" class="buttonspell" value="&{template:spell}{{character=@{character_name}}}{{spellname=@{namespell}}}{{type=@{spelltipo}}}{{execution=@{spellexecucao}}}{{duration=@{spellduracao}}}{{range=@{spellalcance}}}{{targetarea=@{spellalvoarea}}}{{resistance=@{spellresistencia}}}{{description=@{spelldescription}}}{{cd=@{spellcd}}}">T</button>
                                        <input name="attr_namespell" type="text" spellcheck="false" value=""/>
                                        <input type="checkbox" class="hiddencheckbox">
                                        <span class="hiddencheckboxcover">W</span>
                                        <div class="extra">
                                            <span data-i18n="tipo_magia">Tipo</span>
                                            <input name="attr_spelltipo" type="text" spellcheck="false" value=""/>
                                            <span class="cd" data-i18n="cd_magia">CD</span>
                                            <input class="cd" name="attr_spellcd" type="text" spellcheck="false" value=""/>

                                            <span data-i18n="execucao_magia">Execução</span>
                                            <input  class="singleline" name="attr_spellexecucao" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="alcance_magia">Alcance</span>
                                            <input class="singleline" name="attr_spellalcance" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="duracao_magia">Duração</span>
                                            <input class="singleline" name="attr_spellduracao" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="alvo_area_magia">Alvo/Área</span>
                                            <input class="singleline" name="attr_spellalvoarea" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="resistencia_magia">Resistência</span>
                                            <input class="singleline"  name="attr_spellresistencia" type="text" spellcheck="false" value=""/>

                                            <span class="fullline" data-i18n="descricao_magia">Descrição</span>
                                            <textarea class="fullline" name="attr_spelldescription"></textarea>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                            <div class="cicloheader">
                                <div class="ciclo-title" data-i18n="quinto_circulo">5º Círculo</div>
                                <div class="ciclo-cost" data-i18n="quinto_custo">15 PM</div>
                            </div>
                            <div class="sheet-containerspelllist">
                                <fieldset class="repeating_spells5">
                                    <div class="container-single-spell">
                                        <button type="roll" name="roll_spell5" class="buttonspell" value="&{template:spell}{{character=@{character_name}}}{{spellname=@{namespell}}}{{type=@{spelltipo}}}{{execution=@{spellexecucao}}}{{duration=@{spellduracao}}}{{range=@{spellalcance}}}{{targetarea=@{spellalvoarea}}}{{resistance=@{spellresistencia}}}{{description=@{spelldescription}}}{{cd=@{spellcd}}}">T</button>
                                        <input name="attr_namespell" type="text" spellcheck="false" value=""/>
                                        <input type="checkbox" class="hiddencheckbox">
                                        <span class="hiddencheckboxcover">W</span>
                                        <div class="extra">
                                            <span data-i18n="tipo_magia">Tipo</span>
                                            <input name="attr_spelltipo" type="text" spellcheck="false" value=""/>
                                            <span class="cd" data-i18n="cd_magia">CD</span>
                                            <input class="cd" name="attr_spellcd" type="text" spellcheck="false" value=""/>

                                            <span data-i18n="execucao_magia">Execução</span>
                                            <input  class="singleline" name="attr_spellexecucao" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="alcance_magia">Alcance</span>
                                            <input class="singleline" name="attr_spellalcance" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="duracao_magia">Duração</span>
                                            <input class="singleline" name="attr_spellduracao" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="alvo_area_magia">Alvo/Área</span>
                                            <input class="singleline" name="attr_spellalvoarea" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="resistencia_magia">Resistência</span>
                                            <input class="singleline"  name="attr_spellresistencia" type="text" spellcheck="false" value=""/>

                                            <span class="fullline" data-i18n="descricao_magia">Descrição</span>
                                            <textarea class="fullline" name="attr_spelldescription"></textarea>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                        <div class="spellcolumn">
                            <div class="cicloheader">
                                <div class="ciclo-title" data-i18n="segundo_circulo">2º Círculo</div>
                                <div class="ciclo-cost" data-i18n="segundo_custo">3 PM</div>
                            </div>
                            <div class="sheet-containerspelllist">
                                <fieldset class="repeating_spells2">
                                    <div class="container-single-spell">
                                        <button type="roll" name="roll_spell2" class="buttonspell" value="&{template:spell}{{character=@{character_name}}}{{spellname=@{namespell}}}{{type=@{spelltipo}}}{{execution=@{spellexecucao}}}{{duration=@{spellduracao}}}{{range=@{spellalcance}}}{{targetarea=@{spellalvoarea}}}{{resistance=@{spellresistencia}}}{{description=@{spelldescription}}}{{cd=@{spellcd}}}">T</button>
                                        <input name="attr_namespell" type="text" spellcheck="false" value=""/>
                                        <input type="checkbox" class="hiddencheckbox">
                                        <span class="hiddencheckboxcover">W</span>
                                        <div class="extra">
                                            <span data-i18n="tipo_magia">Tipo</span>
                                            <input name="attr_spelltipo" type="text" spellcheck="false" value=""/>
                                            <span class="cd" data-i18n="cd_magia">CD</span>
                                            <input class="cd" name="attr_spellcd" type="text" spellcheck="false" value=""/>

                                            <span data-i18n="execucao_magia">Execução</span>
                                            <input  class="singleline" name="attr_spellexecucao" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="alcance_magia">Alcance</span>
                                            <input class="singleline" name="attr_spellalcance" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="duracao_magia">Duração</span>
                                            <input class="singleline" name="attr_spellduracao" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="alvo_area_magia">Alvo/Área</span>
                                            <input class="singleline" name="attr_spellalvoarea" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="resistencia_magia">Resistência</span>
                                            <input class="singleline"  name="attr_spellresistencia" type="text" spellcheck="false" value=""/>

                                            <span class="fullline" data-i18n="descricao_magia">Descrição</span>
                                            <textarea class="fullline" name="attr_spelldescription"></textarea>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                            <div class="cicloheader">
                                <div class="ciclo-title" data-i18n="quarto_circulo">4º Círculo</div>
                                <div class="ciclo-cost" data-i18n="quarto_custo">10 PM</div>
                            </div>
                            <div class="sheet-containerspelllist">
                                <fieldset class="repeating_spells4">
                                    <div class="container-single-spell">
                                        <button type="roll" name="roll_spell4" class="buttonspell" value="&{template:spell}{{character=@{character_name}}}{{spellname=@{namespell}}}{{type=@{spelltipo}}}{{execution=@{spellexecucao}}}{{duration=@{spellduracao}}}{{range=@{spellalcance}}}{{targetarea=@{spellalvoarea}}}{{resistance=@{spellresistencia}}}{{description=@{spelldescription}}}{{cd=@{spellcd}}}">T</button>
                                        <input name="attr_namespell" type="text" spellcheck="false" value=""/>
                                        <input type="checkbox" class="hiddencheckbox">
                                        <span class="hiddencheckboxcover">W</span>
                                        <div class="extra">
                                            <span data-i18n="tipo_magia">Tipo</span>
                                            <input name="attr_spelltipo" type="text" spellcheck="false" value=""/>
                                            <span class="cd" data-i18n="cd_magia" >CD</span>
                                            <input class="cd" name="attr_spellcd" type="text" spellcheck="false" value=""/>

                                            <span data-i18n="execucao_magia">Execução</span>
                                            <input  class="singleline" name="attr_spellexecucao" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="alcance_magia">Alcance</span>
                                            <input class="singleline" name="attr_spellalcance" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="duracao_magia">Duração</span>
                                            <input class="singleline" name="attr_spellduracao" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="alvo_area_magia">Alvo/Área</span>
                                            <input class="singleline" name="attr_spellalvoarea" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="resistencia_magia">Resistência</span>
                                            <input class="singleline"  name="attr_spellresistencia" type="text" spellcheck="false" value=""/>

                                            <span data-i18n="descricao_magia" class="fullline">Descrição</span>
                                            <textarea class="fullline" name="attr_spelldescription"></textarea>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                            
                        </div>
                    </div>
                    <div class="corner top-left"></div>
                    <div class="corner top-right"></div>
                    <div class="corner bottom-left"></div>
                    <div class="corner bottom-right"></div>
                </div>
            </div>
        </div>
        
    </div> 
    
    <div class="right-container">
        <div class="logo-level">
            <div class="container-logo">
                <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/master/Tormenta20%20-%20Jogo%20do%20Ano/Tormenta20Logo.png" class="logo-tormenta"/>
            </div>
            <div class="deityAndLevel">
                <div class="input-with-text-bellow">
                    <div class="total-level">                    
                        <input name="attr_charnivel" maxlength="3" type="text" spellcheck="false" value="1"/>
                        <span data-i18n="nivel_personagem">Nível do Personagem</span>                    
                    </div>
                </div>
                <div class="input-with-text-bellow">
                    <input name="attr_divindade" type="text" spellcheck="false" value=""/>
                    <span data-i18n="divindade">Divindade</span>
                </div>                
            </div>
        </div>
        <div class="skills-container">
            <div class="container-negative-corner">
                <div class="inside-negative-corner">
                    <div class="skill-grid-template header">
                        <div class="grid-title pericias-titulo" data-i18n="pericias">Perícias</div>
                        <div></div>
                        <div class="grid-title" data-i18n="pericias_total">Total</div>
                        <div></div>
                        <!-- <div class="small-title">1/2 do Nível</div>
                        <div></div> -->
                        <div class="small-title" data-i18n="pericias_atributo">Atributo</div>
                        <div></div>
                        <div class="small-title" data-i18n="pericias_treino">Treino</div>
                        <div></div>
                        <div class="small-title" data-i18n="pericias_outros">Outros</div>
                    </div>
                    <div class="skill-grid-template skill-list">
                        <!-- Acrobacia -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_acrobacia_treinada" title="@{acrobacia_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_acrobacia" value="&{template:t20}{{character=@{character_name}}}{{rollname=Acrobacia}}{{theroll=[[1d20+[[@{acrobaciatotal}]]]]}}" class="skill-button">
                                <span class="sup-penalidade" data-i18n="acrobacia">Acrobacia</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total first" name="attr_acrobaciatotal" maxlength="2" type="text" spellcheck="false" title="@{acrobaciatotal}" value="@{metade_do_nivel} + @{acrobaciaatributo2} + @{acrobaciatreino} + @{acrobaciaoutros} -1 * @{penalidades_armadura} -1 * @{penalidades_armadura_carga}" disabled="true">
                        <div class="signal">=</div>
                        <!-- <input name="attr_acrobacianivel" type="text" spellcheck="false" value="@{metade_do_nivel}" disabled="true">
                        <div class="signal">+</div> -->
                        <select name="attr_acrobaciaatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" selected data-i18n="mod_destreza">DES*</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_acrobaciatreino" type="text" spellcheck="false" maxlength="3" title="@{acrobaciatreino}" value="@{bonus_treino}*@{acrobacia_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_acrobaciaoutros" maxlength="3" type="text" spellcheck="false" title="@{acrobaciaoutros}" value="0">
                        <!-- Adestramento -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_adestramento_treinada" title="@{adestramento_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll"  name="roll_adestramento" value="&{template:t20}{{character=@{character_name}}}{{rollname=Adestramento}}{{theroll=[[1d20+[[@{adestramentototal}]]]]}}" class="skill-button">
                                <span class="sup-treinada" data-i18n="adestramento">Adestramento</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_adestramentototal" maxlength="2" type="text" spellcheck="false" title="@{adestramentototal}" value="@{metade_do_nivel} + @{adestramentoatributo2} + @{adestramentotreino} + @{adestramentooutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_adestramentoatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod}" selected data-i18n="mod_carisma">CAR*</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_adestramentotreino" type="text" spellcheck="false" maxlength="3" title="@{adestramentotreino}" value="@{bonus_treino}*@{adestramento_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_adestramentooutros" maxlength="3" type="text" spellcheck="false" title="@{adestramentooutros}" value="0">

                        <!-- Atletismo -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_atletismo_treinada" title="@{atletismo_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll"  name="roll_atletismo" value="&{template:t20}{{character=@{character_name}}}{{rollname=Atletismo}}{{theroll=[[1d20+[[@{atletismototal}]]]]}}" class="skill-button">
                                <span data-i18n="atletismo">Atletismo</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_atletismototal" maxlength="2" type="text" spellcheck="false" title="@{atletismototal}" value="@{metade_do_nivel} + @{atletismoatributo2} + @{atletismotreino} + @{atletismooutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_atletismoatributo2">
                            <option value="@{for_mod}" selected data-i18n="mod_forca">FOR*</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_atletismotreino" type="text" spellcheck="false" maxlength="3" title="@{atletismotreino}" value="@{bonus_treino}*@{atletismo_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_atletismooutros" maxlength="3" type="text" spellcheck="false" title="@{atletismooutros}" value="0">

                        <!-- Atuação-->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_atuacao_treinada" title="@{atuacao_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_atuacao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Atuação}}{{theroll=[[1d20+[[@{atuacaototal}]]]]}}" class="skill-button">
                                <span data-i18n="atuacao">Atuação</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_atuacaototal" maxlength="2" type="text" spellcheck="false" title="@{atuacaototal}" value="@{metade_do_nivel} + @{atuacaoatributo2} + @{atuacaotreino} + @{atuacaooutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_atuacaoatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod}" selected data-i18n="mod_carisma">CAR*</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_atuacaotreino" type="text" spellcheck="false" maxlength="3" title="@{atuacaotreino}" value="@{bonus_treino}*@{atuacao_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_atuacaooutros" maxlength="3" type="text" spellcheck="false" title="@{atuacaooutros}" value="0">

                        <!-- Cavalgar -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_cavalgar_treinada" title="@{cavalgar_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_cavalgar" value="&{template:t20}{{character=@{character_name}}}{{rollname=Cavalgar}}{{theroll=[[1d20+[[@{cavalgartotal}]]]]}}" class="skill-button">
                                <span data-i18n="cavalgar">Cavalgar</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_cavalgartotal" maxlength="2" type="text" spellcheck="false" title="@{cavalgartotal}" value="@{metade_do_nivel} + @{cavalgaratributo2} + @{cavalgartreino} + @{cavalgaroutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_cavalgaratributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" selected data-i18n="mod_destreza">DES*</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_cavalgartreino" type="text" spellcheck="false" maxlength="3" title="@{cavalgartreino}" value="@{bonus_treino}*@{cavalgar_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_cavalgaroutros" maxlength="3" type="text" spellcheck="false" title="@{cavalgaroutros}" value="0">

                        <!-- Conhecimento -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_conhecimento_treinada" title="@{conhecimento_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_conhecimento" value="&{template:t20}{{character=@{character_name}}}{{rollname=Conhecimento}}{{theroll=[[1d20+[[@{conhecimentototal}]]]]}}" class="skill-button">
                                <span class="sup-treinada" data-i18n="conhecimento">Conhecimento</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_conhecimentototal" maxlength="2" type="text" spellcheck="false" title="@{conhecimentototal}" value="@{metade_do_nivel} + @{conhecimentoatributo2} + @{conhecimentotreino} + @{conhecimentooutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_conhecimentoatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" selected data-i18n="mod_inteligencia">INT*</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_conhecimentotreino" type="text" spellcheck="false" maxlength="3" title="@{conhecimentotreino}" value="@{bonus_treino}*@{conhecimento_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_conhecimentooutros" maxlength="3" type="text" spellcheck="false" title="@{conhecimentooutros}" value="0">

                        <!-- Cura -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_cura_treinada" title="@{cura_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_cura" value="&{template:t20}{{character=@{character_name}}}{{rollname=Cura}}{{theroll=[[1d20+[[@{curatotal}]]]]}}" class="skill-button">
                                <span data-i18n="cura">Cura</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_curatotal" maxlength="2" type="text" spellcheck="false" title="@{curatotal}" value="@{metade_do_nivel} + @{curaatributo2} + @{curatreino} + @{curaoutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_curaatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" selected data-i18n="mod_sabedoria">SAB*</option>
                            <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_curatreino" type="text" spellcheck="false" maxlength="3" title="@{curatreino}" value="@{bonus_treino}*@{cura_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_curaoutros" maxlength="3" type="text" spellcheck="false" title="@{curaoutros}" value="0">

                        <!-- Diplomacia -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_diplomacia_treinada" title="@{diplomacia_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_diplomacia" value="&{template:t20}{{character=@{character_name}}}{{rollname=Diplomacia}}{{theroll=[[1d20+[[@{diplomaciatotal}]]]]}}" class="skill-button">
                                <span data-i18n="diplomacia">Diplomacia</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_diplomaciatotal" maxlength="2" type="text" spellcheck="false" title="@{diplomaciatotal}" value="@{metade_do_nivel} + @{diplomaciaatributo2} + @{diplomaciatreino} + @{diplomaciaoutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_diplomaciaatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod}" selected data-i18n="mod_carisma">CAR*</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_diplomaciatreino" type="text" spellcheck="false" maxlength="3" title="@{diplomaciatreino}" value="@{bonus_treino}*@{diplomacia_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_diplomaciaoutros" maxlength="3" type="text" spellcheck="false" title="@{diplomaciaoutros}" value="0">

                        <!-- Enganação -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_enganacao_treinada" title="@{enganacao_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_enganacao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Enganação}}{{theroll=[[1d20+[[@{enganacaototal}]]]]}}" class="skill-button">
                                <span data-i18n="enganacao">Enganação</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_enganacaototal" maxlength="2" type="text" spellcheck="false" title="@{enganacaototal}" value="@{metade_do_nivel} + @{enganacaoatributo2} + @{enganacaotreino} + @{enganacaooutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_enganacaoatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod}" selected data-i18n="mod_carisma">CAR*</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_enganacaotreino" type="text" spellcheck="false" maxlength="3" title="@{enganacaotreino}" value="@{bonus_treino}*@{enganacao_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_enganacaooutros" maxlength="3" type="text" spellcheck="false" title="@{enganacaooutros}" value="0">

                        <!-- Fortitude -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_fortitude_treinada" title="@{fortitude_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_fortitude" value="&{template:t20}{{character=@{character_name}}}{{rollname=Fortitude}}{{theroll=[[1d20+[[@{fortitudetotal}]]]]}}" class="skill-button">
                                <span data-i18n="fortitude">Fortitude</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_fortitudetotal" maxlength="2" type="text" spellcheck="false" title="@{fortitudetotal}" value="@{metade_do_nivel} + @{fortitudeatributo2} + @{fortitudetreino} + @{fortitudeoutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_fortitudeatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" selected data-i18n="mod_constituicao">CON*</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_fortitudetreino" type="text" spellcheck="false" maxlength="3" title="@{fortitudetreino}" value="@{bonus_treino}*@{fortitude_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_fortitudeoutros" maxlength="3" type="text" spellcheck="false" title="@{fortitudeoutros}" value="0">

                        <!-- Furtividade -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_furtividade_treinada" title="@{furtividade_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_furtividade" value="&{template:t20}{{character=@{character_name}}}{{rollname=Furtividade}}{{theroll=[[1d20+[[@{furtividadetotal}]]]]}}" class="skill-button">
                                <span class="sup-penalidade" data-i18n="furtividade">Furtividade</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_furtividadetotal" maxlength="2" type="text" spellcheck="false" title="@{furtividadetotal}" value="@{metade_do_nivel} + @{furtividadeatributo2} + @{furtividadetreino} + @{furtividadeoutros} -1 * @{penalidades_armadura} -1 * @{penalidades_armadura_carga}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_furtividadeatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" selected data-i18n="mod_destreza">DES*</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                             <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_furtividadetreino" type="text" spellcheck="false" maxlength="3" title="@{furtividadetreino}" value="@{bonus_treino}*@{furtividade_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_furtividadeoutros" maxlength="3" type="text" spellcheck="false" title="@{furtividadeoutros}" value="0">

                        <!-- Guerra -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_guerra_treinada" title="@{guerra_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_guerra" value="&{template:t20}{{character=@{character_name}}}{{rollname=Guerra}}{{theroll=[[1d20+[[@{guerratotal}]]]]}}" class="skill-button">
                                <span class="sup-treinada" data-i18n="guerra">Guerra</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_guerratotal" maxlength="2" type="text" spellcheck="false" title="@{guerratotal}" value="@{metade_do_nivel} + @{guerraatributo2} + @{guerratreino} + @{guerraoutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_guerraatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" selected data-i18n="mod_inteligencia">INT*</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                             <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_guerratreino" type="text" spellcheck="false" maxlength="3" title="@{guerratreino}" value="@{bonus_treino}*@{guerra_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_guerraoutros" maxlength="3" type="text" spellcheck="false" title="@{guerraoutros}" value="0">


                        <!-- Iniciativa -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_iniciativa_treinada" title="@{iniciativa_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_iniciativa" value="&{template:t20}{{character=@{character_name}}}{{rollname=Iniciativa}}{{theroll=[[1d20+[[@{iniciativatotal}]] &{tracker}]]}}" class="skill-button">
                                <span data-i18n="iniciativa">Iniciativa</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_iniciativatotal" maxlength="2" type="text" spellcheck="false" title="@{iniciativatotal}" value="@{metade_do_nivel} + @{iniciativaatributo2} + @{iniciativatreino} + @{iniciativaoutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_iniciativaatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" selected data-i18n="mod_destreza">DES*</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                             <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_iniciativatreino" type="text" spellcheck="false" maxlength="3" title="@{iniciativatreino}" value="@{bonus_treino}*@{iniciativa_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_iniciativaoutros" maxlength="3" type="text" spellcheck="false" title="@{iniciativaoutros}" value="0">

                        <!-- Intimidação -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_intimidacao_treinada" title="@{intimidacao_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_intimidacao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Intimidação}}{{theroll=[[1d20+[[@{intimidacaototal}]]]]}}" class="skill-button">
                                <span data-i18n="intimidacao">Intimidação</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_intimidacaototal" maxlength="2" type="text" spellcheck="false" title="@{intimidacaototal}" value="@{metade_do_nivel} + @{intimidacaoatributo2} + @{intimidacaotreino} + @{intimidacaooutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_intimidacaoatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod}" selected data-i18n="mod_carisma">CAR*</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_intimidacaotreino" type="text" spellcheck="false" maxlength="3" title="@{intimidacaotreino}" value="@{bonus_treino}*@{intimidacao_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_intimidacaooutros" maxlength="3" type="text" spellcheck="false" title="@{intimidacaooutros}" value="0">

                        <!-- Intuição -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_intuicao_treinada" title="@{intuicao_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_intuicao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Intuição}}{{theroll=[[1d20+[[@{intuicaototal}]]]]}}" class="skill-button">
                                <span data-i18n="intuicao">Intuição</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_intuicaototal" maxlength="2" type="text" spellcheck="false" title="@{intuicaototal}" value="@{metade_do_nivel} + @{intuicaoatributo2} + @{intuicaotreino} + @{intuicaooutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_intuicaoatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" selected data-i18n="mod_sabedoria">SAB*</option>
                             <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_intuicaotreino" type="text" spellcheck="false" maxlength="3" title="@{intuicaotreino}" value="@{bonus_treino}*@{intuicao_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_intuicaooutros" maxlength="3" type="text" spellcheck="false" title="@{intuicaooutros}" value="0">

                        <!-- Investigação -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_investigacao_treinada" title="@{investigacao_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_investigacao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Investigação}}{{theroll=[[1d20+[[@{investigacaototal}]]]]}}" class="skill-button">
                                <span data-i18n="investigacao">Investigação</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_investigacaototal" maxlength="2" type="text" spellcheck="false" title="@{investigacaototal}" value="@{metade_do_nivel} + @{investigacaoatributo2} + @{investigacaotreino} + @{investigacaooutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_investigacaoatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" selected data-i18n="mod_inteligencia">INT*</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_investigacaotreino" type="text" spellcheck="false" maxlength="3" title="@{investigacaotreino}" value="@{bonus_treino}*@{investigacao_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_investigacaooutros" maxlength="3" type="text" spellcheck="false" title="@{investigacaooutros}" value="0">

                        <!-- Jogatina -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_jogatina_treinada" title="@{jogatina_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_jogatina" value="&{template:t20}{{character=@{character_name}}}{{rollname=Jogatina}}{{theroll=[[1d20+[[@{jogatinatotal}]]]]}}" class="skill-button">
                                <span class="sup-treinada" data-i18n="jogatina">Jogatina</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_jogatinatotal" maxlength="2" type="text" spellcheck="false" title="@{jogatinatotal}" value="@{metade_do_nivel} + @{jogatinaatributo2} + @{jogatinatreino} + @{jogatinaoutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_jogatinaatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod}" selected data-i18n="mod_carisma">CAR*</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_jogatinatreino" type="text" spellcheck="false" maxlength="3" title="@{jogatinatreino}" value="@{bonus_treino}*@{jogatina_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_jogatinaoutros" maxlength="3" type="text" spellcheck="false" title="@{jogatinaoutros}" value="0">

                        <!-- Ladinagem -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_ladinagem_treinada" title="@{ladinagem_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_ladinagem" value="&{template:t20}{{character=@{character_name}}}{{rollname=Ladinagem}}{{theroll=[[1d20+[[@{ladinagemtotal}]]]]}}" class="skill-button">
                                <span class="sup-treinada-penalidade" data-i18n="ladinagem">Ladinagem</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_ladinagemtotal" maxlength="2" type="text" spellcheck="false" title="@{ladinagemtotal}" value="@{metade_do_nivel} + @{ladinagematributo2} + @{ladinagemtreino} + @{ladinagemoutros} -1 * @{penalidades_armadura} -1 * @{penalidades_armadura_carga}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_ladinagematributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" selected data-i18n="mod_destreza">DES*</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_ladinagemtreino" type="text" spellcheck="false" maxlength="3" title="@{ladinagemtreino}" value="@{bonus_treino}*@{ladinagem_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_ladinagemoutros" maxlength="3" type="text" spellcheck="false" title="@{ladinagemoutros}" value="0">

                        <!-- Luta -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_luta_treinada" title="@{luta_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_luta" value="&{template:t20}{{character=@{character_name}}}{{rollname=Luta}}{{theroll=[[1d20+[[@{lutatotal}]]]]}}" class="skill-button">
                                <span data-i18n="luta">Luta</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_lutatotal" maxlength="2" type="text" spellcheck="false" title="@{lutatotal}" value="@{metade_do_nivel} + @{lutaatributo2} + @{lutatreino} + @{lutaoutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_lutaatributo2">
                            <option value="@{for_mod}" selected data-i18n="mod_forca">FOR*</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_lutatreino" type="text" spellcheck="false" maxlength="3" title="@{lutatreino}" value="@{bonus_treino}*@{luta_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_lutaoutros" maxlength="3" type="text" spellcheck="false" title="@{lutaoutros}" value="0">

                        <!-- Misticismo -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_misticismo_treinada" title="@{misticismo_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_misticismo" value="&{template:t20}{{character=@{character_name}}}{{rollname=Misticismo}}{{theroll=[[1d20+[[@{misticismototal}]]]]}}" class="skill-button">
                                <span class="sup-treinada" data-i18n="misticismo">Misticismo</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_misticismototal" maxlength="2" type="text" spellcheck="false" title="@{misticismototal}" value="@{metade_do_nivel} + @{misticismoatributo2} + @{misticismotreino} + @{misticismooutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_misticismoatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" selected data-i18n="mod_inteligencia">INT*</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_misticismotreino" type="text" spellcheck="false" maxlength="3" title="@{misticismotreino}" value="@{bonus_treino}*@{misticismo_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_misticismooutros" maxlength="3" type="text" spellcheck="false" title="@{misticismooutros}" value="0">

                        <!-- Nobreza -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_nobreza_treinada" title="@{nobreza_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_nobreza" value="&{template:t20}{{character=@{character_name}}}{{rollname=Nobreza}}{{theroll=[[1d20+[[@{nobrezatotal}]]]]}}" class="skill-button">
                                <span class="sup-treinada" data-i18n="nobreza">Nobreza</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_nobrezatotal" maxlength="2" type="text" spellcheck="false" title="@{nobrezatotal}" value="@{metade_do_nivel} + @{nobrezaatributo2} + @{nobrezatreino} + @{nobrezaoutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_nobrezaatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" selected data-i18n="mod_inteligencia">INT*</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_nobrezatreino" type="text" spellcheck="false" maxlength="3" title="@{nobrezatreino}" value="@{bonus_treino}*@{nobreza_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_nobrezaoutros" maxlength="3" type="text" spellcheck="false" title="@{nobrezaoutros}" value="0">

                        <!-- Ofício -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_oficio_treinada" title="@{oficio_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="oficio">
                            <button type="roll" name="roll_oficio1" name="roll_oficio1" value="&{template:t20}{{character=@{character_name}}}{{rollname=Ofício @{oficionome}}}{{theroll=[[1d20+[[@{oficiototal}]]]]}}" class="skill-button">
                                <span data-i18n="oficio">Ofício</span>
                            </button>
                            <input class="nome-oficio" name="attr_oficionome" type="text" spellcheck="false">
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_oficiototal" maxlength="2" type="text" spellcheck="false" title="@{oficiototal}" value="@{metade_do_nivel} + @{oficioatributo2} + @{oficiotreino} + @{oficiooutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_oficioatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" selected data-i18n="mod_inteligencia">INT*</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_oficiotreino" type="text" spellcheck="false" maxlength="3" title="@{oficiotreino}" value="@{bonus_treino}*@{oficio_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_oficiooutros" maxlength="3" type="text" spellcheck="false" title="@{oficiooutros}" value="0">

                        <!-- Ofício 2 -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_oficio2_treinada" title="@{oficio2_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="oficio">
                            <button type="roll" name="roll_oficio2" value="&{template:t20}{{character=@{character_name}}}{{rollname=Ofício @{oficio2nome}}}{{theroll=[[1d20+[[@{oficio2total}]]]]}}" class="skill-button">
                                <span data-i18n="oficio">Ofício</span>
                            </button>
                            <input class="nome-oficio" name="attr_oficio2nome" type="text" spellcheck="false">
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_oficio2total" maxlength="2" type="text" spellcheck="false" title="@{oficio2total}" value="@{metade_do_nivel} + @{oficio2atributo2} + @{oficio2treino} + @{oficio2outros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_oficio2atributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" selected data-i18n="mod_inteligencia">INT*</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_oficio2treino" type="text" spellcheck="false" maxlength="3" title="@{oficio2treino}" value="@{bonus_treino}*@{oficio2_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_oficio2outros" maxlength="3" type="text" spellcheck="false" title="@{oficio2outros}" value="0">

                        <!-- Percepção -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_percepcao_treinada" title="@{percepcao_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_percepcao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Percepção}}{{theroll=[[1d20+[[@{percepcaototal}]]]]}}" class="skill-button">
                                <span data-i18n="percepcao">Percepção</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_percepcaototal" maxlength="2" type="text" spellcheck="false" title="@{percepcaototal}" value="@{metade_do_nivel} + @{percepcaoatributo2} + @{percepcaotreino} + @{percepcaooutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_percepcaoatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" selected data-i18n="mod_sabedoria">SAB*</option>
                            <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_percepcaotreino" type="text" spellcheck="false" maxlength="3" title="@{percepcaotreino}" value="@{bonus_treino}*@{percepcao_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_percepcaooutros" maxlength="3" type="text" spellcheck="false" title="@{percepcaooutros}" value="0">

                        <!-- Pilotagem -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_pilotagem_treinada" title="@{pilotagem_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_pilotagem" value="&{template:t20}{{character=@{character_name}}}{{rollname=Pilotagem}}{{theroll=[[1d20+[[@{pilotagemtotal}]]]]}}" class="skill-button">
                                <span class="sup-treinada" data-i18n="pilotagem">Pilotagem</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_pilotagemtotal" maxlength="2" type="text" spellcheck="false" title="@{pilotagemtotal}" value="@{metade_do_nivel} + @{pilotagematributo2} + @{pilotagemtreino} + @{pilotagemoutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_pilotagematributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" selected data-i18n="mod_destreza">DES*</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_pilotagemtreino" type="text" spellcheck="false" maxlength="3" title="@{pilotagemtreino}" value="@{bonus_treino}*@{pilotagem_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_pilotagemoutros" maxlength="3" type="text" spellcheck="false" title="@{pilotagemoutros}" value="0">
                        
                        <!-- Pontaria -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_pontaria_treinada" title="@{pontaria_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_pontaria" value="&{template:t20}{{character=@{character_name}}}{{rollname=Pontaria}}{{theroll=[[1d20+[[@{pontariatotal}]]]]}}" class="skill-button">
                                <span data-i18n="pontaria">Pontaria</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_pontariatotal" maxlength="2" type="text" spellcheck="false" title="@{pontariatotal}" value="@{metade_do_nivel} + @{pontariaatributo2} + @{pontariatreino} + @{pontariaoutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_pontariaatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" selected data-i18n="mod_destreza">DES*</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_pontariatreino" type="text" spellcheck="false" maxlength="3" title="@{pontariatreino}" value="@{bonus_treino}*@{pontaria_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_pontariaoutros" maxlength="3" type="text" spellcheck="false" title="@{pontariaoutros}" value="0">

                        <!-- Reflexos -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_reflexos_treinada" title="@{reflexos_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_reflexos" value="&{template:t20}{{character=@{character_name}}}{{rollname=Reflexos}}{{theroll=[[1d20+[[@{reflexostotal}]]]]}}" class="skill-button">
                                <span data-i18n="reflexos">Reflexos</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_reflexostotal" maxlength="2" type="text" spellcheck="false" title="@{reflexostotal}" value="@{metade_do_nivel} + @{reflexosatributo2} + @{reflexostreino} + @{reflexosoutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_reflexosatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" selected data-i18n="mod_destreza">DES*</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_reflexostreino" type="text" spellcheck="false" maxlength="3" title="@{reflexostreino}" value="@{bonus_treino}*@{reflexos_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_reflexosoutros" maxlength="3" type="text" spellcheck="false" title="@{reflexosoutros}" value="0">

                        <!-- Religião -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_religiao_treinada" title="@{religiao_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_religiao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Religião}}{{theroll=[[1d20+[[@{religiaototal}]]]]}}" class="skill-button">
                                <span class="sup-treinada" data-i18n="religiao">Religião</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_religiaototal" maxlength="2" type="text" spellcheck="false" title="@{religiaototal}" value="@{metade_do_nivel} + @{religiaoatributo2} + @{religiaotreino} + @{religiaooutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_religiaoatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" selected data-i18n="mod_sabedoria">SAB*</option>
                            <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_religiaotreino" type="text" spellcheck="false" maxlength="3" title="@{religiaotreino}" value="@{bonus_treino}*@{religiao_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_religiaooutros" maxlength="3" type="text" spellcheck="false" title="@{religiaooutros}" value="0">

                        <!-- Sobrevivência -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_sobrevivencia_treinada" title="@{sobrevivencia_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_sobrevivencia" value="&{template:t20}{{character=@{character_name}}}{{rollname=Sobrevivência}}{{theroll=[[1d20+[[@{sobrevivenciatotal}]]]]}}" class="skill-button">
                                <span data-i18n="sobrevivencia">Sobrevivência</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_sobrevivenciatotal" maxlength="2" type="text" spellcheck="false" title="@{sobrevivenciatotal}" value="@{metade_do_nivel} + @{sobrevivenciaatributo2} + @{sobrevivenciatreino} + @{sobrevivenciaoutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_sobrevivenciaatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" selected data-i18n="mod_sabedoria">SAB*</option>
                            <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_sobrevivenciatreino" type="text" spellcheck="false" maxlength="3" title="@{sobrevivenciatreino}" value="@{bonus_treino}*@{sobrevivencia_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_sobrevivenciaoutros" maxlength="3" type="text" spellcheck="false" title="@{sobrevivenciaoutros}" value="0">

                        <!-- Vontade -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_vontade_treinada" title="@{vontade_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_vontade" value="&{template:t20}{{character=@{character_name}}}{{rollname=Vontade}}{{theroll=[[1d20+[[@{vontadetotal}]]]]}}" class="skill-button">
                                <span data-i18n="vontade">Vontade</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_vontadetotal" maxlength="2" type="text" spellcheck="false" title="@{vontadetotal}" value="@{metade_do_nivel} + @{vontadeatributo2} + @{vontadetreino} + @{vontadeoutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_vontadeatributo2">
                            <option value="@{for_mod}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod}" selected data-i18n="mod_sabedoria">SAB*</option>
                            <option value="@{car_mod}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_vontadetreino" type="text" spellcheck="false" maxlength="3" title="@{vontadetreino}" value="@{bonus_treino}*@{vontade_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_vontadeoutros" maxlength="3" type="text" spellcheck="false" title="@{vontadeoutros}" value="0">


                        <div class="legenda-pericias">
                            <i>+</i> <span data-i18n="penalidade_armadura">Penalidade de Armadura</span> 
                            <i>*</i> <span data-i18n="somente_treinada">Somente Treinada</span>
                        </div>


                    </div>
                    <div class="corner top-left"></div>
                    <div class="corner top-right"></div>
                    <div class="corner bottom-left"></div>
                    <div class="corner bottom-right"></div>
                </div>
            </div>
        </div>
        <div class="equipment-container">
            <div class="container-negative-corner">
                <div class="inside-negative-corner">
                    <div class="grid-equipment">
                        <div class="small-title" data-i18n="vestido">Vestido</div>
                        <div class="small-title" data-i18n="quantidade">QTD.</div>
                        <div class="grid-title" data-i18n="equipamentos">Equipamentos</div>
                        <div class="small-title" data-i18n="espaco">Espaços</div>
                    </div>
                    
                    <fieldset class="repeating_equipment">
                        <div class="grid-equipment">                            
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_sobrevivencia_treinada" title="@{sobrevivencia_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                            <input name="attr_equipquantity" type="text" spellcheck="false" value="1">
                            <input name="attr_equipname" type="text" spellcheck="false" value="">
                            <input name="attr_equipslot" type="text" spellcheck="false" value="0" >
                        </div>
                    </fieldset>
                    <div class="container-money">
                        <span data-i18n="tibares">T$:</span>
                        <input name="attr_ts" type="text" spellcheck="false" value="0">    
                        <span data-i18n="tibares_ouro">TO:</span>
                        <input name="attr_to" type="text" spellcheck="false" value="0">  
                    </div>
                    <div class="container-money">
                        <span class="cargaspan" data-i18n="carga">Espaços:</span>
                        <input class="cargainput" name="attr_carga" type="text" spellcheck="false" value="0" readonly="1">      
                        <span class="cargaspan" data-i18n="extraslot">E.Extra:</span>
                        <input class="cargainput" name="attr_extraslot" type="text" spellcheck="false" value="0">      
                    </div>
                    <div class="container-money">
                        <span data-i18n="climite">E.Limite:</span>
                        <input class="cargalimite" name="attr_limite" type="text" spellcheck="false" value="@{limite}" readonly="1">
                        <span data-i18n="cmaxima">E.Máxima:</span>
                        <input class="cargamaxima" name="attr_maxima" type="text" spellcheck="false" value="@{maxima}" readonly="1">     
                    </div>
                    <div class="corner top-left"></div>
                    <div class="corner top-right"></div>
                    <div class="corner bottom-left"></div>
                    <div class="corner bottom-right"></div>
                </div>
            </div>
        </div>
        <!-- <div class="charnotes-container">
            <div class="container-negative-corner">
                <div class="inside-negative-corner">
                    <div class="default-title">
                        Anotações
                    </div>
                    <div class="content-centered">
                        <textarea name="attr_charnotes"></textarea>
                    </div>
                    <div class="corner top-left"></div>
                    <div class="corner top-right"></div>
                    <div class="corner bottom-left"></div>
                    <div class="corner bottom-right"></div>
                </div>
            </div>
        </div> -->
    </div> 

    <div class="charnotes-container">
        <div class="container-negative-corner">
            <div class="inside-negative-corner">
                <div class="default-title" data-i18n="anotacoes">
                    Anotações
                </div>
                <div class="content-centered">
                    <textarea name="attr_charnotes"></textarea>
                </div>
                <div class="corner top-left"></div>
                <div class="corner top-right"></div>
                <div class="corner bottom-left"></div>
                <div class="corner bottom-right"></div>
            </div>
        </div>
    </div>

    <div class="menace-container">
        <div class="container-logo">
            <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/master/Tormenta20%20-%20Jogo%20do%20Ano/Tormenta20Logo.png" class="logo-tormenta"/>
        </div>
        <div class="menace-header">
            <div class="name-div">
                <input name="attr_menace_name" type="text" spellcheck="false" value="@{character_name}" placeholder="Nome" class="sheet-menace-name" data-i18n-placeholde="menace-name">
            </div>
            <div class="menace-nd">
                <span>ND</span><span name="attr_menace_nd" placeholder="ND" class="sheet-menace-nd" ></span>
            </div>
        </div>
        <div class="menace-creature-type">
            <input name="attr_menace_type_size" type="text" spellcheck="false" placeholder="Tipo(Criatura) Tamanho(Papel)" class="sheet-menace-creature" data-i18n-placeholde="menace-type">
        </div>
        <div class="menace-base-info">
            <div>
                <button type="roll" name="roll_iniciativa" value="&{template:t20}{{character=@{character_name}}}{{rollname=Iniciativa}}{{theroll=[[1d20+[[@{iniciativatotal}]]]]}}" class="skill-button">
                    <span data-i18n="iniciativa">Iniciativa</span><span name="attr_menace_init" value="@{iniciativatotal}" class="infos"></span>
                </button>,
                <button type="roll" name="roll_percepcao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Percepção}}{{theroll=[[1d20+[[@{percepcaototal}]]]]}}" class="skill-button">
                    <span data-i18n="percepcao">Percepção</span><span name="attr_menace_percep" value="@{percepcaototal}" class="infos"></span> 
                </button>
                <input type="text" class="menace-perception" name="attr_menace_perception" placeholder="Percepção da Criatura" data-i18n-placeholde="menace-perception">
            </div>
            <div>
                <span data-i18n="defesa">Defesa</span><span name="attr_menace_defense" value="@{defesatotal}" class="infos"></span>,
                <button type="roll" name="roll_fort" value="&{template:t20}{{character=@{character_name}}}{{rollname=Fortitude}}{{theroll=[[1d20+[[@{fortitudetotal}]]]]}}" class="skill-button">
                    <span data-i18n="fort">Fort</span><span name="attr_menace_fortitude" value="@{fortitudetotal}" class="infos"></span>
                </button>, 
                <button type="roll" name="roll_ref" value="&{template:t20}{{character=@{character_name}}}{{rollname=Reflexo}}{{theroll=[[1d20+[[@{reflexostotal}]]]]}}" class="skill-button">
                    <span data-i18n="refl">Ref</span><span name="attr_menace_reflex" value="@{reflexostotal}" class="infos"></span>
                </button>, 
                <button type="roll" name="roll_vont" value="&{template:t20}{{character=@{character_name}}}{{rollname=Vontade}}{{theroll=[[1d20+[[@{vontadetotal}]]]]}}" class="skill-button">    
                    <span data-i18n="von">Von</span><span name="attr_menace_will" value="@{vontadetotal}" class="infos"></span> 
                </button>
                <input type="text" class="menace-resistence" name="attr_menace_resist" placeholder="Resistências da Criatura" data-i18n-placeholde="menace-resistence">
            </div>
            <div>
                <span data-i18n="pontos_de_vida">Pontos de Vida</span><span name="attr_menace_hp" class="menace-desloc-vida infos" value="@{vida_max}"></span>
            </div>
            <div>
                <span data-i18n="deslocamento">Deslocamento</span><input type="text" name="attr_menace_desloc" class="menace-desloc-vida infos" placeholder="Deslocamentos Criatura">
            </div>
        </div>
        <div class="menace-rolls">
            <div class="menace-mana-points">
                <span class="menace-mana" data-i18n="pontos_de_mana">Pontos de Mana</span><span class="menace-mana infos" name="attr_menace_mp" value="@{mana_max}" ></span>
            </div>
            <div class="menace-attacks">
                <span class="melee" data-i18n="melee">Corpo a Corpo </span>  
                <fieldset class="repeating_menacemelee sheet-melee">
                    <button type="roll" name="roll_attack" value="&{template:t20-attack}{{character=@{character_name}}}{{attackname=@{nomeataque}}}{{attackroll=[[1d20cs>@{margemcriticoataque}+[[@{ataquepericia}]]+@{bonusataque}]]}} {{damageroll=[[@{danoataque}+@{modatributodano}+@{danoextraataque}]]}} {{criticaldamageroll=[[@{danocriticoataque}+@{modatributodano}+@{danoextraataque}]]}}{{typeofdamage=@{ataquetipodedano}}}{{description=@{ataquedescricao}}}">
                        <span class="melee infos" name="attr_melee_list"></span>
                    </button>
                    <span  name="attr_meleedescription" class="infos"></span>
                    <input name="attr_nomeataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_bonusataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_danoataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_danoextraataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_margemcriticoataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_multiplicadorcriticoataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_danocriticoataque" type="hidden" value="" readonly="1">
                    <input name="attr_ataquepericia" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_ataquetipodedano" type="hidden" spellcheck="false" value="" readonly="1"/>
                    <input name="attr_modatributodano" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_ataquedescricao" type="hidden" spellcheck="false" class="" value="" readonly="1">
                </fieldset>
                <span class="distance" data-i18n="distance">À Distância</span>
                <fieldset class="repeating_menacedistance sheet-distance">                    
                    <button type="roll" name="roll_attack" value="&{template:t20-attack}{{character=@{character_name}}}{{attackname=@{nomeataque}}}{{attackroll=[[1d20cs>@{margemcriticoataque}+[[@{ataquepericia}]]+@{bonusataque}]]}} {{damageroll=[[@{danoataque}+@{modatributodano}+@{danoextraataque}]]}} {{criticaldamageroll=[[@{danocriticoataque}+@{modatributodano}+@{danoextraataque}]]}}{{typeofdamage=@{ataquetipodedano}}}{{description=@{ataquedescricao}}}">
                        <span class="distance infos" name="attr_distance_list"></span>
                    </button>
                    <span  name="attr_distancedescription" class="infos"></span>
                    <input name="attr_nomeataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_bonusataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_danoataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_danoextraataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_margemcriticoataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_multiplicadorcriticoataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_danocriticoataque" type="hidden" value="" readonly="1">
                    <input name="attr_ataquepericia" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_ataquetipodedano" type="hidden" spellcheck="false" value="" readonly="1"/>
                    <input name="attr_modatributodano" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_ataquedescricao" type="hidden" spellcheck="false" class="" value="" readonly="1">
                </fieldset>
            </div>
            <div class="menace-powers">
                <fieldset class="repeating_menaceabilities">
                    <div class="container-menace-ability-power">
                        <button type="roll" name="roll_ability" class="buttonshowinfo" value="&{template:t20-info}{{infoname=@{menacenameabilityinput}}}{{description=@{menaceabilitydescriptioninput}}}">
                            <span name="attr_menacenameability"></span>
                        </button>
                        <span name="attr_menaceabilitydescription" class="infos"></span>
                        <input name="attr_menacenameabilityinput"type="hidden" readonly="1"/>
                        <input name="attr_menaceabilitydescriptioninput"type="hidden" readonly="1"/>
                    </div>
                </fieldset>
            </div>            
            <div class="menace-spells">
                <fieldset class="repeating_menacespells">
                    <div class="container-menace-ability-power">
                        <button type="roll" name="roll_ability" class="buttonshowinfo" value="&{template:t20-info}{{infoname=@{menacenamespellsinput}}}{{description=@{menaceaspellsdescriptioninput}}}">
                            <span name="attr_menacenamespells"></span>
                        </button>
                        <span name="attr_menaceaspellsdescription" class="infos"></span>
                        <input name="attr_menacenamespellsinput"type="hidden" readonly="1"/>
                        <input name="attr_menaceaspellsdescriptioninput"type="hidden" readonly="1"/>
                    </div>
                </fieldset>
            </div>           
        </div>
        <div class="menace-attributes">
            <button type="roll" name="roll_menace_for" value="&{template:t20}{{character=@{character_name}}}{{rollname=Força}}{{theroll=[[1d20+[[@{for_mod}]]]]}}" class="skill-button">    
                <span data-i18n="mod_forca">For</span><span name="attr_menace_for" value="@{for_mod}" class="infos"></span>
            </button>, 
            <button type="roll" name="roll_menace_des" value="&{template:t20}{{character=@{character_name}}}{{rollname=Destreza}}{{theroll=[[1d20+[[@{des_mod}]]]]}}" class="skill-button">    
                <span data-i18n="mod_destreza">Des</span><span name="attr_menace_des" value="@{des_mod}" class="infos"></span>
            </button>, 
            <button type="roll" name="roll_menace_con" value="&{template:t20}{{character=@{character_name}}}{{rollname=Constituição}}{{theroll=[[1d20+[[@{con_mod}]]]]}}" class="skill-button">    
                <span data-i18n="mod_constituicao">Con</span><span name="attr_menace_con" value="@{con_mod}" class="infos"></span>
            </button>, 
            <button type="roll" name="roll_menace_int" value="&{template:t20}{{character=@{character_name}}}{{rollname=Inteligência}}{{theroll=[[1d20+[[@{int_mod}]]]]}}" class="skill-button">    
                <span data-i18n="mod_inteligencia">Int</span><span name="attr_menace_int" value="@{int_mod}" class="infos"></span>
            </button>, 
            <button type="roll" name="roll_menace_sab" value="&{template:t20}{{character=@{character_name}}}{{rollname=Sabedoria}}{{theroll=[[1d20+[[@{sab_mod}]]]]}}" class="skill-button">    
                <span data-i18n="mod_sabedoria">Sab</span><span name="attr_menace_sab" value="@{sab_mod}" class="infos"></span>
            </button>, 
            <button type="roll" name="roll_menace_car" value="&{template:t20}{{character=@{character_name}}}{{rollname=Carisma}}{{theroll=[[1d20+[[@{car_mod}]]]]}}" class="skill-button">    
                <span data-i18n="mod_carisma">Car</span><span name="attr_menace_car" value="@{car_mod}" class="infos"></span>
            </button>
        </div>
        <div class="menace-skills">
            <span data-i18n="pericias">Perícias</span> 
            <button type="roll" name="roll_menace_acrobacia" value="&{template:t20}{{character=@{character_name}}}{{rollname=Acrobacia}}{{theroll=[[1d20+[[@{acrobaciatotal}]]]]}}" class="skill-button">
                <span  data-i18n="acrobacia" class="span-menace infos menace-acrobacia">Acrobacia</span><span class="menace-acrobacia infos" name="attr_menace_acrobaciatotal" value="@{acrobaciatotal}"></span>
            </button> 
            <button type="roll" name="roll_menace_adestramento" value="&{template:t20}{{character=@{character_name}}}{{rollname=Adestramento}}{{theroll=[[1d20+[[@{adestramentototal}]]]]}}" class="skill-button">
                <span  data-i18n="adestramento" class="span-menace infos menace-adestramento">Adestramento</span><span class="menace-adestramento infos"  name="attr_menace_adestramentototal" value="@{adestramentototal}"></span>
            </button> 
            <button type="roll" name="roll_menace_atletismo" value="&{template:t20}{{character=@{character_name}}}{{rollname=Atletismo}}{{theroll=[[1d20+[[@{atletismototal}]]]]}}" class="skill-button">    
                <span  data-i18n="atletismo" class="span-menace infos menace-atletismo">Atletismo</span><span class="menace-atletismo infos"  name="attr_menace_atletismototal" value="@{atletismototal}" ></span>
            </button> 
            <button type="roll" name="roll_menace_atuacao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Atuação}}{{theroll=[[1d20+[[@{atuacaototal}]]]]}}" class="skill-button">    
                <span  data-i18n="atuacao" class="span-menace infos menace-atuacao">Atuação</span><span class="menace-atuacao infos"  name="attr_menace_atuacaototal" value="@{atuacaototal}"></span>
            </button> 
            <button type="roll" name="roll_menace_cavalgar" value="&{template:t20}{{character=@{character_name}}}{{rollname=Cavalgar}}{{theroll=[[1d20+[[@{cavalgartotal}]]]]}}" class="skill-button">    
                <span  data-i18n="cavalgar" class="span-menace infos menace-cavalgar">Cavalgar</span><span class="menace-cavalgar infos"  name="attr_menace_cavalgartotal" value="@{cavalgartotal}"  ></span>
            </button> 
            <button type="roll" name="roll_menace_conhecimento" value="&{template:t20}{{character=@{character_name}}}{{rollname=Conhecimento}}{{theroll=[[1d20+[[@{conhecimentototal}]]]]}}" class="skill-button">    
                <span  data-i18n="conhecimento" class="span-menace infos menace-conhecimento">Conhecimento</span><span class="menace-conhecimento infos"  name="attr_menace_conhecimentototal" value="@{conhecimentototal}" ></span>
            </button> 
            <button type="roll" name="roll_menace_cura" value="&{template:t20}{{character=@{character_name}}}{{rollname=Cura}}{{theroll=[[1d20+[[@{curatotal}]]]]}}" class="skill-button">    
                <span  data-i18n="cura" class="span-menace infos menace-cura">Cura</span><span class="menace-cura infos"  name="attr_menace_curatotal" value="@{curatotal}"></span>
            </button> 
            <button type="roll" name="roll_menace_diplomacia" value="&{template:t20}{{character=@{character_name}}}{{rollname=Diplomacia}}{{theroll=[[1d20+[[@{diplomaciatotal}]]]]}}" class="skill-button">    
                <span  data-i18n="diplomacia" class="span-menace infos menace-diplomacia">Diplomacia</span><span class="menace-diplomacia infos"  name="attr_menace_diplomaciatotal" value="@{diplomaciatotal}"></span>
            </button> 
            <button type="roll" name="roll_menace_enganacao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Enganação}}{{theroll=[[1d20+[[@{enganacaototal}]]]]}}" class="skill-button">    
                <span  data-i18n="enganacao" class="span-menace infos menace-enganacao">Enganação</span><span class="menace-enganacao infos"  name="attr_menace_enganacaototal" value="@{enganacaototal}" ></span>
            </button> 
            <button type="roll" name="roll_menace_furtividade" value="&{template:t20}{{character=@{character_name}}}{{rollname=Furtividade}}{{theroll=[[1d20+[[@{furtividadetotal}]]]]}}" class="skill-button">    
                <span  data-i18n="furtividade" class="span-menace infos menace-furtividade">Furtividade</span><span class="menace-furtividade infos"  name="attr_menace_furtividadetotal" value="@{furtividadetotal}"></span>
            </button> 
            <button type="roll" name="roll_menace_guerra" value="&{template:t20}{{character=@{character_name}}}{{rollname=Guerra}}{{theroll=[[1d20+[[@{guerratotal}]]]]}}" class="skill-button">    
                <span  data-i18n="guerra" class="span-menace infos menace-guerra">Guerra</span><span class="menace-guerra infos"  name="attr_menace_guerratotal" value="@{guerratotal}"></span>
            </button> 
            <button type="roll" name="roll_menace_intimidacao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Intimidação}}{{theroll=[[1d20+[[@{intimidacaototal}]]]]}}" class="skill-button">    
                <span  data-i18n="intimidacao" class="span-menace infos menace-intimidacao">Intimidação</span><span class="menace-intimidacao infos"  name="attr_menace_intimidacaototal" value="@{intimidacaototal}"></span>
            </button> 
            <button type="roll" name="roll_menace_intuicao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Intuição}}{{theroll=[[1d20+[[@{intuicaototal}]]]]}}" class="skill-button">    
                <span  data-i18n="intuicao" class="span-menace infos menace-intuicao">Intuição</span><span class="menace-intuicao infos"  name="attr_menace_intuicaototal" value="@{intuicaototal}"></span>
            </button> 
            <button type="roll" name="roll_menace_investigacao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Investigação}}{{theroll=[[1d20+[[@{investigacaototal}]]]]}}" class="skill-button">    
                <span  data-i18n="investigacao" class="span-menace infos menace-investigacao">Investigação</span><span class="menace-investigacao infos"  name="attr_menace_investigacaototal" value="@{investigacaototal}"></span>
            </button> 
            <button type="roll" name="roll_menace_jogatina" value="&{template:t20}{{character=@{character_name}}}{{rollname=Jogatina}}{{theroll=[[1d20+[[@{jogatinatotal}]]]]}}" class="skill-button">    
                <span  data-i18n="jogatina" class="span-menace infos menace-jogatina">Jogatina</span><span class="menace-jogatina infos"  name="attr_menace_jogatinatotal" value="@{jogatinatotal}"></span>
            </button> 
            <button type="roll" name="roll_menace_ladinagem" value="&{template:t20}{{character=@{character_name}}}{{rollname=Ladinagem}}{{theroll=[[1d20+[[@{ladinagemtotal}]]]]}}" class="skill-button">    
                <span  data-i18n="ladinagem" class="span-menace infos menace-ladinagem">Ladinagem</span><span class="menace-ladinagem infos"  name="attr_menace_ladinagemtotal" value="@{ladinagemtotal}"></span>
            </button> 
            <button type="roll" name="roll_menace_misticismo" value="&{template:t20}{{character=@{character_name}}}{{rollname=Misticismo}}{{theroll=[[1d20+[[@{misticismototal}]]]]}}" class="skill-button">    
                <span  data-i18n="misticismo" class="span-menace infos menace-misticismo">Misticismo</span><span class="menace-misticismo infos"  name="attr_menace_misticismototal" value="@{misticismototal}"></span>
            </button> 
            <button type="roll" name="roll_menace_nobreza" value="&{template:t20}{{character=@{character_name}}}{{rollname=Nobreza}}{{theroll=[[1d20+[[@{nobrezatotal}]]]]}}" class="skill-button">    
                <span  data-i18n="nobreza" class="span-menace infos menace-nobreza">Nobreza</span><span class="menace-nobreza infos"  name="attr_menace_nobrezatotal" value="@{nobrezatotal}" ></span>
            </button> 
            <button type="roll" name="roll_menace_oficio" value="&{template:t20}{{character=@{character_name}}}{{rollname=Ofício}}{{theroll=[[1d20+[[@{oficiototal}]]]]}}" class="skill-button">    
                <span  data-i18n="oficio" class="span-menace infos menace-oficio">Ofício</span><span class="menace-oficio infos"  name="attr_menace_oficiototal" value="@{oficiototal}"></span>
            </button> 
            <button type="roll" name="roll_menace_pilotagem" value="&{template:t20}{{character=@{character_name}}}{{rollname=Pilotagem}}{{theroll=[[1d20+[[@{pilotagemtotal}]]]]}}" class="skill-button">
                <span  data-i18n="pilotagem" class="span-menace infos menace-pilotagem">Pilotagem</span><span class="menace-pilotagem infos"  name="attr_menace_pilotagemtotal" value="@{pilotagemtotal}" ></span>
            </button> 
            <button type="roll" name="roll_menace_religiao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Religião}{{theroll=[[1d20+[[@{religiaototal}]]]]}}" class="skill-button">    
                <span  data-i18n="religiao" class="span-menace infos menace-religiao">Religião</span><span class="menace-religiao infos"  name="attr_menace_religiaototal" value="@{religiaototal}"></span>
            </button> 
            <button type="roll" name="roll_menace_sobrevivencia" value="&{template:t20}{{character=@{character_name}}}{{rollname=Sobrevivência}}{{theroll=[[1d20+[[@{sobrevivenciatotal}]]]]}}" class="skill-button">    
                <span  data-i18n="sobrevivencia" class="span-menace infos menace-sobrevivencia">Sobrevivência</span><span class="menace-sobrevivencia infos" name="attr_menace_sobrevivenciatotal" value="@{sobrevivenciatotal}"></span>
            </button>     
        </div>
        <div class="menace-treasures">
            <span data-i18n="equipamentos">Equipamento</span><span class="menace-treasure">
                <span name="attr_menace_treasure" class="infos"></span>
            </span><br/>
            <span data-i18n="tesouro">Tesouro</span><textarea name="attr_menace_treasures" class="infos"></textarea>
        </div>
    </div>
    <div class="hide-author">
        <div>
            <label class="switch">
                <input id="cstype" class="hiddenelement" type="checkbox" name="attr_cstype" value="1">
                <span class="slider round"></span>
            </label>
            <span class="menace-spam" data-i18n="menace_charactersheet">Ficha Ameaça</span>
        </div>
        
        <span>FICHA OFICIAL BY JAMBO EDITORA</span>
    </div>
    

</div>
<!-- Bonus de Treino -->
<input type="hidden" name="attr_bonus_treino" value="0" readonly="1">
<input type="hidden" name="attr_penalidades_armadura" value="0" readonly="1">
<input type="hidden" name="attr_penalidades_armadura_carga" value="0" readonly="1">
<input type="hidden" name="attr_metade_do_nivel" value="floor(@{charnivel}/2)">
<!-- <input name="attr_character_name" type="hidden" spellcheck="false"> -->
<input name="attr_charname" type="hidden" spellcheck="false" value=""/>
<input type="hidden" name="attr_vida_max" value="@{vidatotal} + @{vidatemp}" readonly/>
<input type="hidden" name="attr_mana_max" value="@{manatotal} + @{manatemp}" readonly/>
<input name="attr_defesatotal" maxlength="3" type="hidden" value="10" spellcheck="false">



<!-- ROLL TEMPLATES -->

<rolltemplate class="sheet-rolltemplate-t20">
    <div class="sheet-rollbox-container">
        <div class="rollbox">
            <div class="roll-title">
                {{character}}
            </div>
            <div class="roll-result">
                {{theroll}}
            </div>
            <div class="roll-name">
                <span>{{rollname}}</span>
            </div>
        </div>
    </div>
</rolltemplate>


<rolltemplate class="sheet-rolltemplate-t20-attack">
    <div class="sheet-rollbox-container">
        <div class="rollbox">
            {{#character}}
            <div class="roll-title">
                {{character}}
            </div>
            {{/character}}
            <div class="attack-title">
                {{attackname}}
            </div>

            <div>
                <div class="roll">
                    {{attackroll}}
                </div>
                <div class="roll-label">
                    Ataque
                </div>
            </div>
            <div class="divisor"><span></span></div>
            <div>
                {{#^rollWasCrit() attackroll}}
                    <div class="roll">
                        {{damageroll}}
                    </div>
                    <div class="roll-label">
                        Dano
                    </div>
                {{/^rollWasCrit() attackroll}}
                {{#rollWasCrit() attackroll}}
                    <div class="roll">
                        {{criticaldamageroll}}
                    </div>
                    <div class="roll-label">
                        Dano <span class="crit"> (Crítico)</span>
                    </div>
                {{/rollWasCrit() attackroll}}
            </div>

            {{#typeofdamage}}
            <div class="tipo-dano">
                {{typeofdamage}}
            </div>
            {{/typeofdamage}}

            {{#description}}
            <div class="descricao">
                {{description}}
            </div>
            {{/description}}
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-t20-error-chance">
    <div class="sheet-rollbox-container">
        <div class="rollbox">
            <div class="roll-title">
                {{character}}
            </div>
            <div class="roll-result">
                {{errorroll}}
            </div>
            <div class="roll-name">
                <span>Chance de Erro</span>
            </div>
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-t20-info">
    <div class="sheet-rollbox-container">
        <div class="rollbox">
            <div class="roll-title">
                {{infoname}}
            </div>
            {{#description}}
            <div class="descricao">
                {{description}}
            </div>
            {{/description}}
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-spell">
    <div class="sheet-spell-container">
        <div class="spellbox">
            <div class="roll-title">
                {{character}}
            </div>
            <div class="spell-name">
                {{spellname}}
            </div>
            <div class="spell-grid">
                {{#type}}
                <div class="spell-atribute">
                    <span>Tipo: </span>{{type}}
                </div>
                {{/type}}

                {{#execution}}
                <div class="spell-atribute">
                    <span>Execução: </span>{{execution}}
                </div>
                {{/execution}}

                {{#duration}}
                <div class="spell-atribute">
                    <span>Duração: </span>{{duration}}
                </div>
                {{/duration}}

                {{#range}}
                <div class="spell-atribute">
                    <span>Alcance: </span>{{range}}
                </div>
                {{/range}}

                {{#targetarea}}
                <div class="spell-atribute">
                    <span>Alvo/Área: </span>{{targetarea}}
                </div>
                {{/targetarea}}

                {{#resistance}}
                <div class="spell-atribute">
                    <span>Resistência: </span>{{resistance}} {{#cd}}(CD{{cd}}){{/cd}}
                </div>
                {{/resistance}}

                {{#description}}
                <div class="descricao">
                    {{description}}
                </div>
                {{/description}}
            </div>
        </div>
    </div>
</rolltemplate>


<rolltemplate class="sheet-rolltemplate-custom">
    <div class="sheet-rollbox-container">
        <div class="rollbox">
            <div class="roll-title">
                {{name}}
            </div>
            {{#secondname}}
            <div class="secondname">
                {{secondname}}
            </div>
            {{/secondname}}
            {{#theroll}}
                <div class="props">
                    <div class="content"><b>{{rollname}}</b> {{theroll}}</div>
                </div>
            {{/theroll}}
            {{#rollWasCrit() theroll}}
                {{#ifcritical}}
                    <div class="props">
                        <div class="content"><b>{{criticalname}}</b> {{ifcritical}}</div>
                    </div>
                {{/ifcritical}}
            {{/rollWasCrit() theroll}}
            {{#^rollWasCrit() theroll}}
                {{#ifcriticalerror}}
                    {{#rollWasFumble() theroll}}
                        {{#ifcriticalerror}}
                            <div class="props">
                                <div class="content"><b>{{criticalname}}</b> {{ifcriticalerror}}</div>
                            </div>
                        {{/ifcriticalerror}}
                    {{/rollWasFumble() theroll}}

                    {{#^rollWasFumble() theroll}}
                        {{#notcritical}}
                            <div class="props">
                                <div class="content"><b>{{criticalname}}</b> {{notcritical}}</div>
                            </div>
                        {{/notcritical}}
                    {{/^rollWasFumble() theroll}}
                {{/ifcriticalerror}}

                {{#^ifcriticalerror}}
                    {{#notcritical}}
                        <div class="props">
                            <div class="content"><b>{{criticalname}}</b> {{notcritical}}</div>
                        </div>
                    {{/notcritical}}
                {{/^ifcriticalerror}}


            {{/^rollWasCrit() theroll}}
            <div class="props">
                {{#allprops() name criticalname ifcritical ifcriticalerror description notcritical theroll rollname secondname}}
                   <div class="content"><b>{{key}}</b> {{value}}</div>
                {{/allprops() name criticalname ifcritical ifcriticalerror description notcritical theroll rollname secondname}}
            </div>
            {{#description}}
                <div class="descricao">
                    {{description}}
                </div>
            {{/description}}
        </div>
    </div>
</rolltemplate>



<script type="text/worker">
    // Stat mods
    ['for', 'des', 'con', 'int', 'sab', 'car'].forEach(stat => {
        on(`sheet:opened change:${stat}`, function(){
            getAttrs([stat], function(v){
                let mod = isNaN(parseInt(v[stat])) ? 0 : v[stat];
                setAttrs({
                    [`${stat}_mod`]: mod 
                });
                setAttrs({
                    [`menace_${stat}`]: mod 
                });

                if(stat == 'for'){                    
                    repeatingSumModified("carga","equipment",["equipquantity","equipslot"], "");   
                }
            }); 
        });
    });

    //Trigger CalculoPesoMoeda
    on("sheet:opened change:ts", function(e){
        repeatingSumModified("carga","equipment",["equipquantity","equipslot"], ""); 
    });
    on("sheet:opened change:to", function(e){
        repeatingSumModified("carga","equipment",["equipquantity","equipslot"], ""); 
    });
    on("sheet:opened change:extraslot", function(e){
        repeatingSumModified("carga","equipment",["equipquantity","equipslot"], ""); 
    });

    //Bonus em perícia por nível
    on("sheet:opened change:charnivel", function(e){
        getAttrs(["charnivel"], function(v){
            let nivel = parseInt(v.charnivel);
            let bonusnivel = 0;
            if(nivel >= 15){
                bonusnivel = 6;
            }else if(nivel >= 7){
                bonusnivel = 4;
            }else{
                bonusnivel = 2;
            }
            setAttrs({
                "bonus_treino": bonusnivel 
            });
        }); 
    });

    //Penalidades de Armadura:
    on("sheet:opened change:armadurapenalidade1 change:armadurapenalidade2", function(e){
        getAttrs(["armadurapenalidade1", "armadurapenalidade2"], function(v){
            let penalidade1 = isNaN(v.armadurapenalidade1) ? 0 : v.armadurapenalidade1;
            let penalidade2 = isNaN(v.armadurapenalidade2) ? 0 : v.armadurapenalidade2;

            let total = parseInt(penalidade1) + parseInt(penalidade2);            
            setAttrs({
                "penalidades_armadura": total
            });
        }); 
    });

    //Calculando o dano de um acerto critico
    on("change:repeating_attacks:danoataque change:repeating_attacks:multiplicadorcriticoataque", function() {
        getAttrs([
           "repeating_attacks_danoataque",
           "repeating_attacks_multiplicadorcriticoataque"
         ], function(v) {
            let dano = '';
            
            if(typeof v.repeating_attacks_danoataque === 'string'){
                dano = v.repeating_attacks_danoataque;
            }else{
                dano = v.repeating_attacks_danoataque.toString();
            }

            let multiplicador = parseInt(v.repeating_attacks_multiplicadorcriticoataque);
            let resultado = dano;

            for(let i=0; i < multiplicador - 1; i++){
                resultado = resultado + " + " + dano;
            }
                         
            setAttrs({
            "repeating_attacks_danocriticoataque": resultado
            });
        });
     });
     
     //Importador:
     on("sheet:opened", function(e){
        setAttrs({
            "created_by_linki": ""
        });
    });
     on("change:created_by_linki", function(e){
        "use strict";
        getAttrs(["created_by_linki"], function(v){
            try{
                if(!!v.created_by_linki){
                    let data = JSON.parse(v.created_by_linki);
                    if(!!data){
                        let newrowid = generateRowID();
                        newrowid = newrowid.replace(/_/g, "Z");
                        let toadd = {};

                        Object.keys(data).forEach(function(objkey){
                            toadd["repeating_attacks_" + newrowid + "_" + objkey] = data[objkey];
                        });
                        setAttrs(toadd);
                    }
                }
            }catch(e){
                console.error("ops!", e);
            }finally {
                setAttrs({
                    "created_by_linki": ""
                });
            }
        }); 
    });

    //Repeating Sum [https://wiki.roll20.net/RepeatingSum]
    const repeatingSumModified = (destination,section, fields, appendText = '', multiplier = 1) => {
        if (!Array.isArray(fields)) fields = [fields];
        getSectionIDs(`repeating_${section}`, idArray => {
            const attrArray = idArray.reduce( (m,id) => [...m, ...(fields.map(field => `repeating_${section}_${id}_${field}`))],[]);

            let pesoMoeda = 0;
            let slotExtra = 0;
            getAttrs(["ts", "to", "extraslot"], function(v){
                let tibar = parseInt(v.ts);
                let tibouro = parseInt(v.to);
                slotExtra = parseInt(v.extraslot)
                pesoMoeda = Math.floor((tibar + tibouro)/1000);                
            }); 

            getAttrs(["for", ...attrArray], v => {
                //console.log("===== values of v: "+ JSON.stringify(v) +" =====");
                     // getValue: if not a number, returns 1 if it is 'on' (checkbox), otherwise returns 0..
                const getValue = (section, id,field) => parseFloat(v[`repeating_${section}_${id}_${field}`]) || (v[`repeating_${section}_${id}_${field}`] === 'on' ? 1 : 0); 
                const sumTotal = idArray.reduce((total, id) => total + fields.reduce((subtotal,field) => subtotal * getValue(section, id,field),1),0);
                
                let for_mod = parseInt(v.for);

                let cargalimit = for_mod > 0 ? 10 + (2 * for_mod) :  10 + parseInt(for_mod);
                cargalimit += slotExtra;
                let cargamax = cargalimit * 2;
                                               
                let setObj = {}

                let finalTotal = (sumTotal * multiplier) + pesoMoeda;

                finalTotal = finalTotal.toString() + appendText;

                setObj['penalidades_armadura_carga'] = 0;

                setObj[destination] = finalTotal;

                setObj['limite'] = cargalimit;
                setObj['maxima'] = cargamax;
                
                if(sumTotal * multiplier > cargalimit){
                    setObj['penalidades_armadura_carga'] = 5;

                    setObj[destination] = finalTotal + "!" ;
                }

                setAttrs(setObj);
            });
        });
    };

    //Calculando carga e seus efeitos:
    on('sheet:opened change:repeating_equipment remove:repeating_equipment', function() {
        repeatingSumModified("carga","equipment",["equipquantity","equipslot"], "");        
    });

    /* // Usar para adicionar uma arma ao criar a ficha
    getSectionIDs('repeating_foo', idArray => {
        log(idArray.length); // logs number of repeating rows within repeating_foo
      });
    */


    //Calculando Defesa Total:
    on("sheet:opened change:defesaatributo change:armaduradefesa1 change:armaduradefesa2 change:defesaoutros change:for_mod change:des_mod change:con_mod change:int_mod change:sab_mod change:car_mod change:modatributodefesa", function(e){
        getAttrs(["defesaatributo", "armaduradefesa1", "armaduradefesa2", "defesaoutros", "for_mod", "des_mod", "con_mod", "int_mod", "sab_mod", "car_mod", "modatributodefesa"], function(v){
            let total = 10;

            //Armadura
            if(!isNaN(v.armaduradefesa1)){
                total = total + parseInt(v.armaduradefesa1);
            }
            //Escudo
            if(!isNaN(v.armaduradefesa2)){
                total = total + parseInt(v.armaduradefesa2);
            }
            //Outros
            if(!isNaN(v.defesaoutros)){
                total = total + parseInt(v.defesaoutros);
            }
            //Mod de Atributo
            let modAttributo = parseInt(v[`${v.modatributodefesa}`]);

            if(!isNaN(modAttributo) && v.defesaatributo == '1'){             
                total = total + modAttributo;
            }

            setAttrs({
                "defesatotal": total,
                "menace_defense": total
            });
        }); 
    });

    const convertToND = (charnivel) => {
        if (charnivel == '.3'){
            return '1/4';
        }
        if (charnivel == '.5'){
            return '1/2';
        }
        return charnivel
    }
 
    //Troca entre a ficha de ameaças e a ficha de jogador
    on("sheet:opened change:cstype", function(e){
       getAttrs(["cstype"], function(v){
           if (v.cstype == 1){
               $20('.sheet-left-container').addClass('sheet-hiddenelement');
               $20('.sheet-right-container').addClass('sheet-hiddenelement');
               $20('.sheet-charnotes-container').addClass('sheet-hiddenelement');
               $20('.sheet-menace-container').removeClass('sheet-hiddenelement');
           } else {
               $20('.sheet-left-container').removeClass('sheet-hiddenelement');
               $20('.sheet-right-container').removeClass('sheet-hiddenelement');
               $20('.sheet-charnotes-container').removeClass('sheet-hiddenelement');
               $20('.sheet-menace-container').addClass('sheet-hiddenelement');
           }
       });
       
       getAttrs(["character_name", "vida_max", "manatotal", "manatemp", "charnivel", "bonus_treino", 
            "iniciativaatributo2", "percepcaoatributo2", "fortitudeatributo2", "reflexosatributo2", "vontadeatributo2",
            "iniciativa_treinada", "percepcao_treinada", "fortitude_treinada", "reflexos_treinada", "vontade_treinada",
            "iniciativaoutros", "percepcaooutros", "fortitudeoutros", "reflexosoutros", "vontadeoutros",
            "for_mod", "des_mod", "int_mod", "sab_mod", "con_mod", "car_mod"
        ], function(v){
           let setObj = {}
           setObj['menace_name'] = v.character_name;
           setObj['menace_hp'] = v.vida_max;
           let mana_total = parseInt(v.manatotal) ? parseInt(v.manatotal) : 0;
           let mana_temp  = parseInt(v.manatemp) ? parseInt(v.manatemp) : 0;
           setObj['menace_mp'] = mana_total + mana_temp;
           setObj['menace_nd'] = convertToND(v.charnivel);


           let metade_nivel = Math.floor(Number.parseFloat(v.charnivel)/2);
            
           let atribute = parseInt(metade_nivel) + parseInt(v[stripTag(v.iniciativaatributo2)]) + (parseInt(v.bonus_treino) * parseInt(v.iniciativa_treinada)) + parseInt(v.iniciativaoutros);
           setObj['menace_init'] = atribute > 0 ? "+" + atribute : atribute;
           atribute = parseInt(metade_nivel) + parseInt(v[stripTag(v.percepcaoatributo2)]) + (parseInt(v.bonus_treino) * parseInt(v.percepcao_treinada)) + parseInt(v.percepcaooutros); 
           setObj['menace_percep'] = atribute > 0 ? "+" + atribute : atribute;
           atribute = parseInt(metade_nivel) + parseInt(v[stripTag(v.fortitudeatributo2)]) + (parseInt(v.bonus_treino) * parseInt(v.fortitude_treinada)) + parseInt(v.fortitudeoutros);
           setObj['menace_fortitude'] = atribute > 0 ? "+" + atribute : atribute; 
           atribute = parseInt(metade_nivel) + parseInt(v[stripTag(v.reflexosatributo2)]) + (parseInt(v.bonus_treino) * parseInt(v.reflexos_treinada)) + parseInt(v.reflexosoutros);
           setObj['menace_reflex'] = atribute > 0 ? "+" + atribute : atribute; 
           atribute = parseInt(metade_nivel) + parseInt(v[stripTag(v.vontadeatributo2)]) + (parseInt(v.bonus_treino) * parseInt(v.vontade_treinada)) + parseInt(v.vontadeoutros);
           setObj['menace_will'] = atribute > 0 ? "+" + atribute : atribute; 

           if (v.mana_max <= 0){
                $20('.sheet-menace-mana').addClass('sheet-hiddenelement');   
           } else {
                $20('.sheet-menace-mana').removeClass('sheet-hiddenelement');
           }
   
           setAttrs(setObj);
       });
                   
        [
            'acrobacia','adestramento','atletismo','atuacao','cavalgar','conhecimento','cura','diplomacia',
            'enganacao','furtividade','guerra','intimidacao','intuicao','investigacao','jogatina','ladinagem',
            'misticismo','nobreza','oficio','oficio2','pilotagem','religiao','sobrevivencia'
        ].forEach(skill => {                          
            getAttrs([
                `${skill}_treinada`, `menace-${skill}`, `${skill}atributo2`, `${skill}outros`, 'bonus_treino',
                'charnivel', "for_mod", "des_mod", "int_mod", "sab_mod", "con_mod", "car_mod"        
            ], function(x){  
                let setObj = {}
                
                let metade_nivel = Math.floor(Number.parseFloat(x.charnivel)/2);
                let total_skill = parseInt(metade_nivel) + parseInt(x[stripTag(x[`${skill}atributo2`])]) + (parseInt(x.bonus_treino) * parseInt(x[`${skill}_treinada`])) + parseInt(x[`${skill}outros`]);
                setObj[`menace_${skill}total`] = total_skill > 0 ? "+" + total_skill : total_skill;
                setAttrs(setObj);

                if(parseInt(x[`${skill}_treinada`]) == 1){                    
                    $20(`.sheet-menace-${skill}`).removeClass('sheet-hiddenelement');  
                } else {
                    $20(`.sheet-menace-${skill}`).addClass('sheet-hiddenelement');  
                }
            });                            
        });       
   
   });

   const calcAtaqueFim = (charnivel, atributo, bonus_treino, treino, outros) => { 
        atributo = atributo ? atributo : 0;       
        return Math.floor(Number.parseFloat(charnivel)/2)  + parseInt(atributo) + (parseInt(bonus_treino)*parseInt(treino)) + parseInt(outros);
   }

   const stripTag = (tag) => { return tag.replace('@{','').replace('}',''); } 

   const createDice = () => {
        return '<button type="roll" name="roll_attack" class="buttonrollataque dado-simples" value="">T</button>'                    
   }

   const createAttack = (ataque_fim, bonus, dano, dano_extra, margem, critico ) => {
        let ataque_total = (ataque_fim + parseInt(bonus));
        ataque_total = ataque_total > 0 ? " +" + ataque_total : " -" + ataque_total; 

        console.log(ataque_fim, bonus, dano, dano_extra, margem, critico );

        let critico_final = (parseInt(margem) < 20 || critico > 2) ? ", " : '';
        critico_final = (parseInt(margem) < 20) ? critico_final + margem : critico_final;
        critico_final = (parseInt(margem) < 20 && critico > 2) ? critico_final + "/" : critico_final
        critico_final = (critico > 2) ? critico_final + critico : critico_final;

        return ataque_total + " (" + dano +  "+" + dano_extra + critico_final + ")";
    }

   
    const createSpells = (circle) => {
        getSectionIDs(`repeating_spells${circle}`, (idarray) => {            
            getAttrs(
                idarray.map((id) => `repeating_spells${circle}_${id}_namespell`)
                .concat(idarray.map((id) => `repeating_spells${circle}_${id}_spelldescription`)),
            (v) => {    
                idarray.forEach(
                    (id) => {
                        let newrowattrs = {};
                        let rowId = generateRowID();
                        newrowattrs[`repeating_menacespells_${rowId}_menacenamespells`] = v[`repeating_spells${circle}_${id}_namespell`]; 
                        newrowattrs[`repeating_menacespells_${rowId}_menaceaspellsdescription`] = v[`repeating_spells${circle}_${id}_spelldescription`];
                        newrowattrs[`repeating_menacespells_${rowId}_menacenamespellsinput`] = v[`repeating_spells${circle}_${id}_namespell`]; 
                        newrowattrs[`repeating_menacespells_${rowId}_menaceaspellsdescriptioninput`] = v[`repeating_spells${circle}_${id}_spelldescription`];

                        setAttrs(newrowattrs);
                    }
                ); 
            });
        });
    }

    const eraseRepeatingRow = (repeatingRow) => {
        getSectionIDs(repeatingRow, function(idarray) {
            for(var i=0; i < idarray.length; i++) {
              removeRepeatingRow(repeatingRow +"_"+ idarray[i]);
            }
         });
    }

    on('sheet:opened change:repeating_abilities remove:repeating_abilities change:repeating_powers remove:repeating_powers', () => {
        eraseRepeatingRow("repeating_menaceabilities");
        
        getSectionIDs('repeating_abilities', (idarray) => {        
            getAttrs(idarray.map((id) => `repeating_abilities_${id}_nameability`)
                .concat(idarray.map((id) => `repeating_abilities_${id}_abilitydescription`)
            ), (v) => {    
                idarray.forEach(
                    (id) => {
                        let newrowattrs = {};
                        let rowId = generateRowID();
                        newrowattrs[`repeating_menaceabilities_${rowId}_menacenameability`] = v[`repeating_abilities_${id}_nameability`]; 
                        newrowattrs[`repeating_menaceabilities_${rowId}_menaceabilitydescription`] = v[`repeating_abilities_${id}_abilitydescription`];
                        newrowattrs[`repeating_menaceabilities_${rowId}_menacenameabilityinput`] = v[`repeating_abilities_${id}_nameability`]; 
                        newrowattrs[`repeating_menaceabilities_${rowId}_menaceabilitydescriptioninput`] = v[`repeating_abilities_${id}_abilitydescription`];

                        setAttrs(newrowattrs);
                    }
                );                
            });
        });
    
        getSectionIDs('repeating_powers', (idarray) => {
            getAttrs(
                idarray.map((id) => `repeating_powers_${id}_namepower`)
                .concat(idarray.map((id) => `repeating_powers_${id}_powerdescription`)
                ), (v) => {
                    idarray.forEach(
                        (id) => {
                            let newrowattrs = {};
                            let rowId = generateRowID();
                            newrowattrs[`repeating_menaceabilities_${rowId}_menacenameability`] =  v[`repeating_powers_${id}_namepower`]; 
                            newrowattrs[`repeating_menaceabilities_${rowId}_menaceabilitydescription`] =  v[`repeating_powers_${id}_powerdescription`];
                            newrowattrs[`repeating_menaceabilities_${rowId}_menacenameabilityinput`] =  v[`repeating_powers_${id}_namepower`]; 
                            newrowattrs[`repeating_menaceabilities_${rowId}_menaceabilitydescriptioninput`] =  v[`repeating_powers_${id}_powerdescription`];

                            setAttrs(newrowattrs);
                        }
                    );                     
            });
        });
    });

    on('sheet:opened change:repeating_spells1 remove:repeating_spells1 change:repeating_spells2 remove:repeating_spells2 change:repeating_spells3 remove:repeating_spells3 change:repeating_spells4 remove:repeating_spells4 change:repeating_spells5 remove:repeating_spells5', () => {
        eraseRepeatingRow("repeating_menacespells");
        ['1','2','3','4','5'].forEach((x) => createSpells(x));        
    });

    on('sheet:opened change:repeating_equipment remove:repeating_equipment', () => {
        getSectionIDs('repeating_equipment', (idarray) => {
            getAttrs(
                idarray.map((id) => `repeating_equipment_${id}_equipquantity`)
                    .concat(idarray.map((id) => `repeating_equipment_${id}_equipname`)),
                (v) => {
                    let equip = idarray.map((id) => v[`repeating_equipment_${id}_equipname`]).join(', ');
                setAttrs({menace_treasure: equip});
            });
        });
    });

    on('sheet:opened change:repeating_attacks remove:repeating_attacks', () => {
        eraseRepeatingRow("repeating_menacemelee");
        eraseRepeatingRow("repeating_menacedistance");

        getSectionIDs('repeating_attacks', (idarray) => {
            getAttrs(
                [   'charnivel', 'lutaatributo2', 'bonus_treino', 'luta_treinada', 'lutaoutros',
                    'pontariaatributo2', 'pontaria_treinada', 'pontariaoutros',
                    'for_mod', 'des_mod', 'con_mod', 'int_mod', 'sab_mod', 'car_mod', 'character_name'
                ]
                            .concat(idarray.map((id) => `repeating_attacks_${id}_modatributodano`))
                            .concat(idarray.map((id) => `repeating_attacks_${id}_nomeataque`))
                            .concat(idarray.map((id) => `repeating_attacks_${id}_bonusataque`))
                            .concat(idarray.map((id) => `repeating_attacks_${id}_danoataque`))
                            .concat(idarray.map((id) => `repeating_attacks_${id}_danoextraataque`))
                            .concat(idarray.map((id) => `repeating_attacks_${id}_danocriticoataque`))
                            .concat(idarray.map((id) => `repeating_attacks_${id}_margemcriticoataque`))
                            .concat(idarray.map((id) => `repeating_attacks_${id}_multiplicadorcriticoataque`))
                            .concat(idarray.map((id) => `repeating_attacks_${id}_ataquetipodedano`))
                            .concat(idarray.map((id) => `repeating_attacks_${id}_ataquedescricao`))
                            .concat(idarray.map((id) => `repeating_attacks_${id}_ataquepericia`))                            
                , (values) => {
                    $20('.sheet-melee').addClass('sheet-hiddenelement');
                    $20('.sheet-distance').addClass('sheet-hiddenelement');
                                                           
                    idarray.forEach(
                        (id) => {
                            let tagPericia = stripTag(values[`repeating_attacks_${id}_ataquepericia`]).replace('total','');
                            let newrowattrs = {};
                            let rowId = generateRowID();
                            let ataqueaTributo = stripTag(values[`${tagPericia}atributo2`]);  
                            let ataque_fim = calcAtaqueFim(values['charnivel'], values[ataqueaTributo], values['bonus_treino'], values[`${tagPericia}_treinada`], values[`${tagPericia}outros`]);
                            let menace_attack = '';
                            let menace_list = '';
                            let menace_attackdescription = '';

                            if ( tagPericia == 'luta' || tagPericia == 'atuacao' ){
                                $20('.sheet-melee').removeClass('sheet-hiddenelement');  
                                menace_attack = 'repeating_menacemelee' ;
                                menace_list = 'melee_list'
                                menace_description = 'meleedescription';
                            } else {
                                $20('.sheet-distance').removeClass('sheet-hiddenelement');
                                menace_attack = 'repeating_menacedistance' ;   
                                menace_list = 'distance_list';
                                menace_description = 'distancedescription';                                                                                                                           
                            } 
                            
                            newrowattrs[`${menace_attack}_${rowId}_${menace_list}`] = values[`repeating_attacks_${id}_nomeataque`];    

                            newrowattrs[`${menace_attack}_${rowId}_${menace_description}`] = createAttack(ataque_fim, values[`repeating_attacks_${id}_bonusataque`],
                                    values[`repeating_attacks_${id}_danoataque`], values[`repeating_attacks_${id}_danoextraataque`],
                                    values[`repeating_attacks_${id}_margemcriticoataque`], values[`repeating_attacks_${id}_multiplicadorcriticoataque`]); 
                                
                            
                            newrowattrs[`${menace_attack}_${rowId}_nomeataque`] = values[`repeating_attacks_${id}_nomeataque`];
                            newrowattrs[`${menace_attack}_${rowId}_bonusataque`] = values[`repeating_attacks_${id}_bonusataque`];
                            newrowattrs[`${menace_attack}_${rowId}_danoataque`] = values[`repeating_attacks_${id}_danoataque`];
                            newrowattrs[`${menace_attack}_${rowId}_danoextraataque`] = values[`repeating_attacks_${id}_danoextraataque`];
                            newrowattrs[`${menace_attack}_${rowId}_margemcriticoataque`] = values[`repeating_attacks_${id}_margemcriticoataque`];
                            newrowattrs[`${menace_attack}_${rowId}_multiplicadorcriticoataque`] = values[`repeating_attacks_${id}_multiplicadorcriticoataque`];
                            newrowattrs[`${menace_attack}_${rowId}_danocriticoataque`]= values[`repeating_attacks_${id}_danocriticoataque`];
                            newrowattrs[`${menace_attack}_${rowId}_ataquepericia`] = values[`repeating_attacks_${id}_ataquepericia`];
                            newrowattrs[`${menace_attack}_${rowId}_ataquetipodedano`] = values[`repeating_attacks_${id}_ataquetipodedano`];
                            newrowattrs[`${menace_attack}_${rowId}_modatributodano`] = values[`repeating_attacks_${id}_modatributodano`];
                            newrowattrs[`${menace_attack}_${rowId}_ataquedescricao`] = values[`repeating_attacks_${id}_ataquedescricao`];

                            setAttrs(newrowattrs);
                        }                     
                    );
            });
        });
    });


    //Compatibilidade para o nome (FAZ O BOTÃO DE EDITAR A FICHA SUMIR)
    /*on("sheet:opened", function(e){
        getAttrs(["charname"], function(v){
            
            if(v.charname != '' || v.charname.length < 1){
                let newname = v.charname;            
                setAttrs({
                    "character_name": newname
                });
            }
        }); 
    });*/
    
    ['vida', 'mana'].forEach(max => {
        on(`change:${max}total change:${max}temp`, () => {
            getAttrs([`${max}total`, `${max}temp`], v => {
                const temp = +v[`${max}temp`] || 0;
                const total = +v[`${max}total`] || 0;
                setAttrs({
                    [`${max}_max`]: temp + total
                });
            });
        });
    });

</script>